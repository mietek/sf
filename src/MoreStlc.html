<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>MoreStlc: More on the Simply Typed Lambda-Calculus</title>
<script type="text/javascript" src="jquery-1.8.3.js"></script>
<script type="text/javascript" src="main.js"></script>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">MoreStlc<span class="subtitle">More on the Simply Typed Lambda-Calculus</span></h1>

<div class="code code-tight">
</div>

<div class="doc">

</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Maps.html#"><span class="id" type="library">Maps</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <span class="id" type="keyword">Types</span>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Smallstep.html#"><span class="id" type="library">Smallstep</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Stlc.html#"><span class="id" type="library">Stlc</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab599"></a><h1 class="section">Simple Extensions to STLC</h1>

<div class="paragraph"> </div>

 The simply typed lambda-calculus has enough structure to make its
    theoretical properties interesting, but it is not much of a
    programming language.  In this chapter, we begin to close the gap
    with real-world languages by introducing a number of familiar
    features that have straightforward treatments at the level of
    typing. 
<div class="paragraph"> </div>

<a name="lab600"></a><h2 class="section">Numbers</h2>

<div class="paragraph"> </div>

 As we saw in exercise <span class="inlinecode"><span class="id" type="var">stlc_arith</span></span> at the end of the <span class="inlinecode"><span class="id" type="var">StlcProp</span></span>
    chapter, adding types, constants, and primitive operations for
    numbers is easy &mdash; basically just a matter of combining the
    <a href="Types.html"><span class="inlineref">Types</span></a> and <a href="Stlc.html"><span class="inlineref">Stlc</span></a> chapters. 
<div class="paragraph"> </div>

<a name="lab601"></a><h2 class="section">Let Bindings</h2>

<div class="paragraph"> </div>

 When writing a complex expression, it is useful to be able
    to give names to some of its subexpressions to avoid repetition
    and increase readability.  Most languages provide one or more ways
    of doing this.  In OCaml (and Coq), for example, we can write <span class="inlinecode"><span class="id" type="keyword">let</span></span>
    <span class="inlinecode"><span class="id" type="var">x</span>=<span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode"><span class="id" type="keyword">in</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span> to mean "reduce the expression <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> to a value and
    bind the name <span class="inlinecode"><span class="id" type="var">x</span></span> to this value while reducing <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span>."

<div class="paragraph"> </div>

    Our <span class="inlinecode"><span class="id" type="keyword">let</span></span>-binder follows OCaml in choosing a standard
    <i>call-by-value</i> evaluation order, where the <span class="inlinecode"><span class="id" type="keyword">let</span></span>-bound term must
    be fully reduced before reduction of the <span class="inlinecode"><span class="id" type="keyword">let</span></span>-body can begin.
    The typing rule <span class="inlinecode"><span class="id" type="var">T_Let</span></span> tells us that the type of a <span class="inlinecode"><span class="id" type="keyword">let</span></span> can be
    calculated by calculating the type of the <span class="inlinecode"><span class="id" type="keyword">let</span></span>-bound term,
    extending the context with a binding with this type, and in this
    enriched context calculating the type of the body (which is then
    the type of the whole <span class="inlinecode"><span class="id" type="keyword">let</span></span> expression).

<div class="paragraph"> </div>

    At this point in the book, it's probably easier simply to look at
    the rules defining this new feature than to wade through a lot of
    English text conveying the same information.  Here they are: 
<div class="paragraph"> </div>

 Syntax:
<pre>
       t ::=                Terms
           | ...               (other terms same as before)
           | let x=t in t      let-binding
</pre>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

    Reduction:
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Let1) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">let&nbsp;x=t<sub>1</sub>&nbsp;in&nbsp;t<sub>2</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;let&nbsp;x=t<sub>1</sub>'&nbsp;in&nbsp;t<sub>2</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_LetValue) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">let&nbsp;x=v<sub>1</sub>&nbsp;in&nbsp;t<sub>2</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;[x:=v<sub>1</sub>]t<sub>2</sub></td>
  <td></td>
</td>
</table></center>    Typing:
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T<sub>1</sub>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;,&nbsp;x:T<sub>1</sub>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>2</sub>&nbsp;:&nbsp;T<sub>2</sub></td>
  <td class="infrulenamecol" rowspan="3">
    (T_Let) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;let&nbsp;x=t<sub>1</sub>&nbsp;in&nbsp;t<sub>2</sub>&nbsp;:&nbsp;T<sub>2</sub></td>
  <td></td>
</td>
</table></center>
<div class="paragraph"> </div>

<a name="lab602"></a><h2 class="section">Pairs</h2>

<div class="paragraph"> </div>

 Our functional programming examples in Coq have made
    frequent use of <i>pairs</i> of values.  The type of such a pair is
    called a <i>product type</i>.

<div class="paragraph"> </div>

    The formalization of pairs is almost too simple to be worth
    discussing.  However, let's look briefly at the various parts of
    the definition to emphasize the common pattern. 
<div class="paragraph"> </div>

 In Coq, the primitive way of extracting the components of a pair
    is <i>pattern matching</i>.  An alternative style is to take <span class="inlinecode"><span class="id" type="var">fst</span></span> and
    <span class="inlinecode"><span class="id" type="var">snd</span></span> &mdash; the first- and second-projection operators &mdash; as
    primitives.  Just for fun, let's do our products this way.  For
    example, here's how we'd write a function that takes a pair of
    numbers and returns the pair of their sum and difference:
<pre>
       &lambda;x:Nat*Nat.
          let sum = x.fst + x.snd in
          let diff = x.fst - x.snd in
          (sum,diff)
</pre>

<div class="paragraph"> </div>

 Adding pairs to the simply typed lambda-calculus, then, involves
    adding two new forms of term &mdash; pairing, written <span class="inlinecode">(<span class="id" type="var">t<sub>1</sub></span>,<span class="id" type="var">t<sub>2</sub></span>)</span>, and
    projection, written <span class="inlinecode"><span class="id" type="var">t.fst</span></span> for the first projection from <span class="inlinecode"><span class="id" type="var">t</span></span> and
    <span class="inlinecode"><span class="id" type="var">t.snd</span></span> for the second projection &mdash; plus one new type constructor,
    <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span>*<span class="id" type="var">T<sub>2</sub></span></span>, called the <i>product</i> of <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span></span> and <span class="inlinecode"><span class="id" type="var">T<sub>2</sub></span></span>.  
<div class="paragraph"> </div>

 Syntax:
<pre>
       t ::=                Terms
           | (t,t)             pair
           | t.fst             first projection
           | t.snd             second projection
           | ...

       v ::=                Values
           | (v,v)             pair value
           | ...

       T ::=                Types
           | T * T             product type
           | ...
</pre>

<div class="paragraph"> </div>

 For reduction, we need several new rules specifying how pairs and
    projection behave.
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Pair1) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">(t<sub>1</sub>,t<sub>2</sub>)&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;(t<sub>1</sub>',t<sub>2</sub>)</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>2</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>2</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Pair2) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">(v<sub>1</sub>,t<sub>2</sub>)&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;(v<sub>1</sub>,t<sub>2</sub>')</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Fst1) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>.fst&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'.fst</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_FstPair) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">(v<sub>1</sub>,v<sub>2</sub>).fst&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;v<sub>1</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Snd1) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>.snd&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'.snd</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_SndPair) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">(v<sub>1</sub>,v<sub>2</sub>).snd&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;v<sub>2</sub></td>
  <td></td>
</td>
</table></center>
<div class="paragraph"> </div>

 Rules <span class="inlinecode"><span class="id" type="var">ST_FstPair</span></span> and <span class="inlinecode"><span class="id" type="var">ST_SndPair</span></span> say that, when a fully
    reduced pair meets a first or second projection, the result is
    the appropriate component.  The congruence rules <span class="inlinecode"><span class="id" type="var">ST_Fst1</span></span> and
    <span class="inlinecode"><span class="id" type="var">ST_Snd1</span></span> allow reduction to proceed under projections, when the
    term being projected from has not yet been fully reduced.
    <span class="inlinecode"><span class="id" type="var">ST_Pair1</span></span> and <span class="inlinecode"><span class="id" type="var">ST_Pair2</span></span> reduce the parts of pairs: first the
    left part, and then &mdash; when a value appears on the left &mdash; the right
    part.  The ordering arising from the use of the metavariables <span class="inlinecode"><span class="id" type="var">v</span></span>
    and <span class="inlinecode"><span class="id" type="var">t</span></span> in these rules enforces a left-to-right evaluation
    strategy for pairs.  (Note the implicit convention that
    metavariables like <span class="inlinecode"><span class="id" type="var">v</span></span> and <span class="inlinecode"><span class="id" type="var">v<sub>1</sub></span></span> can only denote values.)  We've
    also added a clause to the definition of values, above, specifying
    that <span class="inlinecode">(<span class="id" type="var">v<sub>1</sub></span>,<span class="id" type="var">v<sub>2</sub></span>)</span> is a value.  The fact that the components of a pair
    value must themselves be values ensures that a pair passed as an
    argument to a function will be fully reduced before the function
    body starts executing. 
<div class="paragraph"> </div>

 The typing rules for pairs and projections are straightforward.
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T<sub>1</sub>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>2</sub>&nbsp;:&nbsp;T<sub>2</sub></td>
  <td class="infrulenamecol" rowspan="3">
    (T_Pair) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;(t<sub>1</sub>,t<sub>2</sub>)&nbsp;:&nbsp;T<sub>1</sub>*T<sub>2</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T<sub>11</sub>*T<sub>12</sub></td>
  <td class="infrulenamecol" rowspan="3">
    (T_Fst) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>.fst&nbsp;:&nbsp;T<sub>11</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T<sub>11</sub>*T<sub>12</sub></td>
  <td class="infrulenamecol" rowspan="3">
    (T_Snd) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>.snd&nbsp;:&nbsp;T<sub>12</sub></td>
  <td></td>
</td>
</table></center>
<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" type="var">T_Pair</span></span> says that <span class="inlinecode">(<span class="id" type="var">t<sub>1</sub></span>,<span class="id" type="var">t<sub>2</sub></span>)</span> has type <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span>*<span class="id" type="var">T<sub>2</sub></span></span> if <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> has
   type <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span></span> and <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span> has type <span class="inlinecode"><span class="id" type="var">T<sub>2</sub></span></span>.  Conversely, <span class="inlinecode"><span class="id" type="var">T_Fst</span></span> and <span class="inlinecode"><span class="id" type="var">T_Snd</span></span>
   tell us that, if <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> has a product type <span class="inlinecode"><span class="id" type="var">T<sub>11</sub></span>*<span class="id" type="var">T<sub>12</sub></span></span> (i.e., if it
   will reduce to a pair), then the types of the projections from
   this pair are <span class="inlinecode"><span class="id" type="var">T<sub>11</sub></span></span> and <span class="inlinecode"><span class="id" type="var">T<sub>12</sub></span></span>. 
<div class="paragraph"> </div>

<a name="lab603"></a><h2 class="section">Unit</h2>

<div class="paragraph"> </div>

 Another handy base type, found especially in languages in
    the ML family, is the singleton type <span class="inlinecode"><span class="id" type="var">Unit</span></span>.  It has a single element &mdash; the term constant <span class="inlinecode"><span class="id" type="var">unit</span></span> (with a small
    <span class="inlinecode"><span class="id" type="var">u</span></span>) &mdash; and a typing rule making <span class="inlinecode"><span class="id" type="var">unit</span></span> an element of <span class="inlinecode"><span class="id" type="var">Unit</span></span>.  We
    also add <span class="inlinecode"><span class="id" type="var">unit</span></span> to the set of possible values &mdash; indeed, <span class="inlinecode"><span class="id" type="var">unit</span></span> is
    the <i>only</i> possible result of reducing an expression of type
    <span class="inlinecode"><span class="id" type="var">Unit</span></span>. 
<div class="paragraph"> </div>

 Syntax:
<pre>
       t ::=                Terms
           | unit              unit value
           | ...

       v ::=                Values
           | unit              unit
           | ...

       T ::=                Types
           | Unit              Unit type
           | ...
</pre>
    Typing:
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (T_Unit) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;unit&nbsp;:&nbsp;Unit</td>
  <td></td>
</td>
</table></center>
<div class="paragraph"> </div>

 It may seem a little strange to bother defining a type that
    has just one element &mdash; after all, wouldn't every computation
    living in such a type be trivial?

<div class="paragraph"> </div>

    This is a fair question, and indeed in the STLC the <span class="inlinecode"><span class="id" type="var">Unit</span></span> type is
    not especially critical (though we'll see two uses for it below).
    Where <span class="inlinecode"><span class="id" type="var">Unit</span></span> really comes in handy is in richer languages with
    <i>side effects</i> &mdash; e.g., assignment statements that mutate
    variables or pointers, exceptions and other sorts of nonlocal
    control structures, etc.  In such languages, it is convenient to
    have a type for the (trivial) result of an expression that is
    evaluated only for its effect. 
<div class="paragraph"> </div>

<a name="lab604"></a><h2 class="section">Sums</h2>

<div class="paragraph"> </div>

 Many programs need to deal with values that can take two distinct
   forms.  For example, we might identify employees in an accounting
   application using using <i>either</i> their name <i>or</i> their id number.
   A search function might return <i>either</i> a matching value <i>or</i> an
   error code.

<div class="paragraph"> </div>

   These are specific examples of a binary <i>sum type</i> (sometimes called
   a <i>disjoint union</i>), which describes a set of values drawn from 
   one of two given types, e.g.:
<pre>
       Nat + Bool
</pre>

<div class="paragraph"> </div>

 We create elements of these types by <i>tagging</i> elements of
    the component types.  For example, if <span class="inlinecode"><span class="id" type="var">n</span></span> is a <span class="inlinecode"><span class="id" type="var">Nat</span></span> then <span class="inlinecode"><span class="id" type="var">inl</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span>
    is an element of <span class="inlinecode"><span class="id" type="var">Nat</span>+<span class="id" type="var">Bool</span></span>; similarly, if <span class="inlinecode"><span class="id" type="var">b</span></span> is a <span class="inlinecode"><span class="id" type="var">Bool</span></span> then
    <span class="inlinecode"><span class="id" type="var">inr</span></span> <span class="inlinecode"><span class="id" type="var">b</span></span> is a <span class="inlinecode"><span class="id" type="var">Nat</span>+<span class="id" type="var">Bool</span></span>.  The names of the tags <span class="inlinecode"><span class="id" type="var">inl</span></span> and <span class="inlinecode"><span class="id" type="var">inr</span></span>
    arise from thinking of them as functions
<pre>
   inl : Nat -&gt; Nat + Bool
   inr : Bool -&gt; Nat + Bool
</pre>
    that "inject" elements of <span class="inlinecode"><span class="id" type="var">Nat</span></span> or <span class="inlinecode"><span class="id" type="var">Bool</span></span> into the left and right
    components of the sum type <span class="inlinecode"><span class="id" type="var">Nat</span>+<span class="id" type="var">Bool</span></span>.  (But note that we don't
    actually treat them as functions in the way we formalize them:
    <span class="inlinecode"><span class="id" type="var">inl</span></span> and <span class="inlinecode"><span class="id" type="var">inr</span></span> are keywords, and <span class="inlinecode"><span class="id" type="var">inl</span></span> <span class="inlinecode"><span class="id" type="var">t</span></span> and <span class="inlinecode"><span class="id" type="var">inr</span></span> <span class="inlinecode"><span class="id" type="var">t</span></span> are primitive
    syntactic forms, not function applications.) 
<div class="paragraph"> </div>

 In general, the elements of a type <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">T<sub>2</sub></span></span> consist of the
    elements of <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span></span> tagged with the token <span class="inlinecode"><span class="id" type="var">inl</span></span>, plus the elements of
    <span class="inlinecode"><span class="id" type="var">T<sub>2</sub></span></span> tagged with <span class="inlinecode"><span class="id" type="var">inr</span></span>. 
<div class="paragraph"> </div>

 One important usage of sums is signaling errors:
<pre>
    div : Nat -&gt; Nat -&gt; (Nat + Unit) =
    div =
      &lambda;x:Nat. &lambda;y:Nat.
        if iszero y then
          inr unit
        else
          inl ...
</pre>
    The type <span class="inlinecode"><span class="id" type="var">Nat</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">Unit</span></span> above is in fact isomorphic to <span class="inlinecode"><span class="id" type="var">option</span></span> <span class="inlinecode"><span class="id" type="var">nat</span></span>
    in Coq, and we've already seen how to signal errors with options. 
<div class="paragraph"> </div>

 To <i>use</i> elements of sum types, we introduce a <span class="inlinecode"><span class="id" type="tactic">case</span></span>
    construct (a very simplified form of Coq's <span class="inlinecode"><span class="id" type="keyword">match</span></span>) to destruct
    them. For example, the following procedure converts a <span class="inlinecode"><span class="id" type="var">Nat</span>+<span class="id" type="var">Bool</span></span>
    into a <span class="inlinecode"><span class="id" type="var">Nat</span></span>:  &lt;&lt;
    getNat =
      &lambda;x:Nat+Bool.
        case x of
          inl n =&gt; n
        | inr b =&gt; if b then 1 else 0
&gt;&gt;

<div class="paragraph"> </div>

 More formally... 
<div class="paragraph"> </div>

 Syntax:
<pre>
       t ::=                Terms
           | inl T t           tagging (left)
           | inr T t           tagging (right)
           | case t of         case
               inl x =&gt; t
             | inr x =&gt; t
           | ...

       v ::=                Values
           | inl T v           tagged value (left)
           | inr T v           tagged value (right)
           | ...

       T ::=                Types
           | T + T             sum type
           | ...
</pre>

<div class="paragraph"> </div>

 Reduction:

<div class="paragraph"> </div>

<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Inl) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">inl&nbsp;T&nbsp;t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;inl&nbsp;T&nbsp;t<sub>1</sub>'</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Inr) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">inr&nbsp;T&nbsp;t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;inr&nbsp;T&nbsp;t<sub>1</sub>'</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>0</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>0</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Case) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">case&nbsp;t<sub>0</sub>&nbsp;of&nbsp;inl&nbsp;x<sub>1</sub>&nbsp;⇒&nbsp;t<sub>1</sub>&nbsp;|&nbsp;inr&nbsp;x<sub>2</sub>&nbsp;⇒&nbsp;t<sub>2</sub>&nbsp;<span style="font-family: arial;">&rArr;</span></td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule">case&nbsp;t<sub>0</sub>'&nbsp;of&nbsp;inl&nbsp;x<sub>1</sub>&nbsp;⇒&nbsp;t<sub>1</sub>&nbsp;|&nbsp;inr&nbsp;x<sub>2</sub>&nbsp;⇒&nbsp;t<sub>2</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_CaseInl) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">case&nbsp;(inl&nbsp;T&nbsp;v<sub>0</sub>)&nbsp;of&nbsp;inl&nbsp;x<sub>1</sub>&nbsp;⇒&nbsp;t<sub>1</sub>&nbsp;|&nbsp;inr&nbsp;x<sub>2</sub>&nbsp;⇒&nbsp;t<sub>2</sub></td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: arial;">&rArr;</span>&nbsp;&nbsp;[x<sub>1</sub>:=v<sub>0</sub>]t<sub>1</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_CaseInr) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">case&nbsp;(inr&nbsp;T&nbsp;v<sub>0</sub>)&nbsp;of&nbsp;inl&nbsp;x<sub>1</sub>&nbsp;⇒&nbsp;t<sub>1</sub>&nbsp;|&nbsp;inr&nbsp;x<sub>2</sub>&nbsp;⇒&nbsp;t<sub>2</sub></td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: arial;">&rArr;</span>&nbsp;&nbsp;[x<sub>2</sub>:=v<sub>0</sub>]t<sub>2</sub></td>
  <td></td>
</td>
</table></center>
<div class="paragraph"> </div>

 Typing:
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;&nbsp;T<sub>1</sub></td>
  <td class="infrulenamecol" rowspan="3">
    (T_Inl) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;inl&nbsp;T<sub>2</sub>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T<sub>1</sub>&nbsp;+&nbsp;T<sub>2</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T<sub>2</sub></td>
  <td class="infrulenamecol" rowspan="3">
    (T_Inr) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;inr&nbsp;T<sub>1</sub>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T<sub>1</sub>&nbsp;+&nbsp;T<sub>2</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>0</sub>&nbsp;:&nbsp;T<sub>1</sub>+T<sub>2</sub></td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;,&nbsp;x<sub>1</sub>:T<sub>1</sub>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T</td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;,&nbsp;x<sub>2</sub>:T<sub>2</sub>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>2</sub>&nbsp;:&nbsp;T</td>
  <td class="infrulenamecol" rowspan="3">
    (T_Case) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;case&nbsp;t<sub>0</sub>&nbsp;of&nbsp;inl&nbsp;x<sub>1</sub>&nbsp;⇒&nbsp;t<sub>1</sub>&nbsp;|&nbsp;inr&nbsp;x<sub>2</sub>&nbsp;⇒&nbsp;t<sub>2</sub>&nbsp;:&nbsp;T</td>
  <td></td>
</td>
</table></center>
<div class="paragraph"> </div>

    We use the type annotation in <span class="inlinecode"><span class="id" type="var">inl</span></span> and <span class="inlinecode"><span class="id" type="var">inr</span></span> to make the typing 
    relation simpler, similarly to what we did for functions. 
<div class="paragraph"> </div>

 Without this extra information, the typing rule <span class="inlinecode"><span class="id" type="var">T_Inl</span></span>, for
    example, would have to say that, once we have shown that <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> is
    an element of type <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span></span>, we can derive that <span class="inlinecode"><span class="id" type="var">inl</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> is an element
    of <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">T<sub>2</sub></span></span> for <i>any</i> type T<sub>2</sub>.  For example, we could derive both
    <span class="inlinecode"><span class="id" type="var">inl</span></span> <span class="inlinecode">5</span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">Nat</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">Nat</span></span> and <span class="inlinecode"><span class="id" type="var">inl</span></span> <span class="inlinecode">5</span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">Nat</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">Bool</span></span> (and infinitely many
    other types).  This peculiarity (technically, a failure of
    uniqueness of types) would mean that we cannot build a
    typechecking algorithm simply by "reading the rules from bottom to
    top" as we could for all the other features seen so far.

<div class="paragraph"> </div>

    There are various ways to deal with this difficulty.  One simple
    one &mdash; which we've adopted here &mdash; forces the programmer to
    explicitly annotate the "other side" of a sum type when performing
    an injection.  This is a bit heavy for programmers (so real
    languages adopt other solutions), but it is easy to understand and
    formalize. 
<div class="paragraph"> </div>

<a name="lab605"></a><h2 class="section">Lists</h2>

<div class="paragraph"> </div>

 The typing features we have seen can be classified into <i>base
    types</i> like <span class="inlinecode"><span class="id" type="var">Bool</span></span>, and <i>type constructors</i> like <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> and <span class="inlinecode">*</span> that
    build new types from old ones.  Another useful type constructor is
    <span class="inlinecode"><span class="id" type="var">List</span></span>.  For every type <span class="inlinecode"><span class="id" type="var">T</span></span>, the type <span class="inlinecode"><span class="id" type="var">List</span></span> <span class="inlinecode"><span class="id" type="var">T</span></span> describes
    finite-length lists whose elements are drawn from <span class="inlinecode"><span class="id" type="var">T</span></span>.

<div class="paragraph"> </div>

    In principle, we could encode lists using pairs, sums and
    <i>recursive</i> types. But giving semantics to recursive types is
    non-trivial. Instead, we'll just discuss the special case of lists
    directly.

<div class="paragraph"> </div>

    Below we give the syntax, semantics, and typing rules for lists.
    Except for the fact that explicit type annotations are mandatory
    on <span class="inlinecode"><span class="id" type="var">nil</span></span> and cannot appear on <span class="inlinecode"><span class="id" type="var">cons</span></span>, these lists are essentially
    identical to those we built in Coq.  We use <span class="inlinecode"><span class="id" type="var">lcase</span></span> to destruct
    lists, to avoid dealing with questions like "what is the <span class="inlinecode"><span class="id" type="var">head</span></span> of
    the empty list?" 
<div class="paragraph"> </div>

 For example, here is a function that calculates the sum of
    the first two elements of a list of numbers:
<pre>
      &lambda;x:List Nat.
      lcase x of nil -&gt; 0
         | a::x' -&gt; lcase x' of nil -&gt; a
                       | b::x'' -&gt; a+b
</pre>

<div class="paragraph"> </div>

    Syntax:
<pre>
       t ::=                Terms
           | nil T
           | cons t t
           | lcase t of nil -&gt; t 
                      | x::x -&gt; t
           | ...

       v ::=                Values
           | nil T             nil value
           | cons v v          cons value
           | ...

       T ::=                Types
           | List T            list of Ts
           | ...
</pre>

<div class="paragraph"> </div>

 Reduction:
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Cons1) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">cons&nbsp;t<sub>1</sub>&nbsp;t<sub>2</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;cons&nbsp;t<sub>1</sub>'&nbsp;t<sub>2</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>2</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>2</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Cons2) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">cons&nbsp;v<sub>1</sub>&nbsp;t<sub>2</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;cons&nbsp;v<sub>1</sub>&nbsp;t<sub>2</sub>'</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Lcase1) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">(lcase&nbsp;t<sub>1</sub>&nbsp;of&nbsp;nil&nbsp;<span style="font-family: arial;">&rarr;</span>&nbsp;t<sub>2</sub>&nbsp;|&nbsp;xh::xt&nbsp;<span style="font-family: arial;">&rarr;</span>&nbsp;t<sub>3</sub>)&nbsp;<span style="font-family: arial;">&rArr;</span></td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule">(lcase&nbsp;t<sub>1</sub>'&nbsp;of&nbsp;nil&nbsp;<span style="font-family: arial;">&rarr;</span>&nbsp;t<sub>2</sub>&nbsp;|&nbsp;xh::xt&nbsp;<span style="font-family: arial;">&rarr;</span>&nbsp;t<sub>3</sub>)</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_LcaseNil) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">(lcase&nbsp;nil&nbsp;T&nbsp;of&nbsp;nil&nbsp;<span style="font-family: arial;">&rarr;</span>&nbsp;t<sub>2</sub>&nbsp;|&nbsp;xh::xt&nbsp;<span style="font-family: arial;">&rarr;</span>&nbsp;t<sub>3</sub>)</td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>2</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_LcaseCons) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">(lcase&nbsp;(cons&nbsp;vh&nbsp;vt)&nbsp;of&nbsp;nil&nbsp;<span style="font-family: arial;">&rarr;</span>&nbsp;t<sub>2</sub>&nbsp;|&nbsp;xh::xt&nbsp;<span style="font-family: arial;">&rarr;</span>&nbsp;t<sub>3</sub>)</td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: arial;">&rArr;</span>&nbsp;[xh:=vh,xt:=vt]t<sub>3</sub></td>
  <td></td>
</td>
</table></center>
<div class="paragraph"> </div>

 Typing:
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (T_Nil) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;nil&nbsp;T&nbsp;:&nbsp;List&nbsp;T</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>2</sub>&nbsp;:&nbsp;List&nbsp;T</td>
  <td class="infrulenamecol" rowspan="3">
    (T_Cons) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;cons&nbsp;t<sub>1</sub>&nbsp;t<sub>2</sub>:&nbsp;List&nbsp;T</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;List&nbsp;T<sub>1</sub></td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>2</sub>&nbsp;:&nbsp;T</td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;,&nbsp;h:T<sub>1</sub>,&nbsp;t:List&nbsp;T<sub>1</sub>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>3</sub>&nbsp;:&nbsp;T</td>
  <td class="infrulenamecol" rowspan="3">
    (T_Lcase) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;(lcase&nbsp;t<sub>1</sub>&nbsp;of&nbsp;nil&nbsp;<span style="font-family: arial;">&rarr;</span>&nbsp;t<sub>2</sub>&nbsp;|&nbsp;h::t&nbsp;<span style="font-family: arial;">&rarr;</span>&nbsp;t<sub>3</sub>)&nbsp;:&nbsp;T</td>
  <td></td>
</td>
</table></center>
<div class="paragraph"> </div>

<a name="lab606"></a><h2 class="section">General Recursion</h2>

<div class="paragraph"> </div>

 Another facility found in most programming languages (including
    Coq) is the ability to define recursive functions.  For example,
    we might like to be able to define the factorial function like
    this:
<pre>
      fact = &lambda;x:Nat.
                if x=0 then 1 else x * (fact (pred x)))
</pre>
   Formalizing such a definition mechanism can be done, but it requires 
   some effort: we'd have to introduce a notion of "function definitions" 
   and carry around an "environment" of such definitions in the definition 
   of the <span class="inlinecode"><span class="id" type="var">step</span></span> relation. 
<div class="paragraph"> </div>

 Here is another way that is straightforward to formalize: instead
    of writing recursive definitions where the right-hand side can
    contain the identifier being defined, we can define a <i>fixed-point
    operator</i> that performs the "unfolding" of the recursive definition
    in the right-hand side as needed, during reduction.
<pre>
   fact =
       fix
         (\f:Nat-&gt;Nat.
            &lambda;x:Nat.
               if x=0 then 1 else x * (f (pred x)))
</pre>

<div class="paragraph"> </div>

 The intuition is that the higher-order function <span class="inlinecode"><span class="id" type="var">f</span></span> passed
    to <span class="inlinecode"><span class="id" type="var">fix</span></span> is a <i>generator</i> for the <span class="inlinecode"><span class="id" type="var">fact</span></span> function: if <span class="inlinecode"><span class="id" type="var">f</span></span> is
    applied to a function that approximates the desired behavior of
    <span class="inlinecode"><span class="id" type="var">fact</span></span> up to some number <span class="inlinecode"><span class="id" type="var">n</span></span> (that is, a function that returns
    correct results on inputs less than or equal to <span class="inlinecode"><span class="id" type="var">n</span></span>), then it
    returns a better approximation to <span class="inlinecode"><span class="id" type="var">fact</span></span> &mdash; a function that
    returns correct results for inputs up to <span class="inlinecode"><span class="id" type="var">n</span>+1</span>.  Applying <span class="inlinecode"><span class="id" type="var">fix</span></span> to
    this generator returns its <i>fixed point</i> &mdash; a function that gives
    the desired behavior for all inputs <span class="inlinecode"><span class="id" type="var">n</span></span>.

<div class="paragraph"> </div>

    (The term "fixed point" has exactly the same sense as in ordinary
    mathematics, where a fixed point of a function <span class="inlinecode"><span class="id" type="var">f</span></span> is an input <span class="inlinecode"><span class="id" type="var">x</span></span>
    such that <span class="inlinecode"><span class="id" type="var">f</span>(<span class="id" type="var">x</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">x</span></span>.  Here, a fixed point of a function <span class="inlinecode"><span class="id" type="var">F</span></span> of
    type (say) <span class="inlinecode">(<span class="id" type="var">Nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="var">Nat</span>)-&gt;(<span class="id" type="var">Nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="var">Nat</span>)</span> is a function <span class="inlinecode"><span class="id" type="var">f</span></span> of type
    <span class="inlinecode"><span class="id" type="var">Nat</span><span style="font-family: arial;">&rarr;</span><span class="id" type="var">Nat</span></span> such that <span class="inlinecode"><span class="id" type="var">F</span></span> <span class="inlinecode"><span class="id" type="var">f</span></span> is behaviorally equivalent to <span class="inlinecode"><span class="id" type="var">f</span></span>.) 
<div class="paragraph"> </div>

 Syntax:
<pre>
       t ::=                Terms
           | fix t             fixed-point operator
           | ...
</pre>
   Reduction:
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Fix1) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">fix&nbsp;t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;fix&nbsp;t<sub>1</sub>'</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">F&nbsp;=&nbsp;\xf:T<sub>1</sub>.t2</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_FixAbs) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">fix&nbsp;F&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;[xf:=fix&nbsp;F]t<sub>2</sub></td>
  <td></td>
</td>
</table></center>   Typing:
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T<sub>1</sub>->T<sub>1</sub></td>
  <td class="infrulenamecol" rowspan="3">
    (T_Fix) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;fix&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T<sub>1</sub></td>
  <td></td>
</td>
</table></center> 
<div class="paragraph"> </div>

 Let's see how <span class="inlinecode"><span class="id" type="var">ST_FixAbs</span></span> works by reducing <span class="inlinecode"><span class="id" type="var">fact</span></span> <span class="inlinecode">3</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">fix</span></span> <span class="inlinecode"><span class="id" type="var">F</span></span> <span class="inlinecode">3</span>,
    where <span class="inlinecode"><span class="id" type="var">F</span></span> <span class="inlinecode">=</span> <span class="inlinecode">(\<span class="id" type="var">f</span>.</span> <span class="inlinecode">\<span class="id" type="var">x</span>.</span> <span class="inlinecode"><span class="id" type="keyword">if</span></span> <span class="inlinecode"><span class="id" type="var">x</span>=0</span> <span class="inlinecode"><span class="id" type="keyword">then</span></span> <span class="inlinecode">1</span> <span class="inlinecode"><span class="id" type="keyword">else</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">*</span> <span class="inlinecode">(<span class="id" type="var">f</span></span> <span class="inlinecode">(<span class="id" type="var">pred</span></span> <span class="inlinecode"><span class="id" type="var">x</span>)))</span> (we are
    omitting type annotations for brevity here).
<pre>
fix F 3
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_FixAbs</span></span>
<pre>
(\x. if x=0 then 1 else x * (fix F (pred x))) 3
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_AppAbs</span></span>
<pre>
if 3=0 then 1 else 3 * (fix F (pred 3))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_If0_Nonzero</span></span>
<pre>
3 * (fix F (pred 3))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_FixAbs</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span>
<pre>
3 * ((\x. if x=0 then 1 else x * (fix F (pred x))) (pred 3))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_PredNat</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">ST_App2</span></span>
<pre>
3 * ((\x. if x=0 then 1 else x * (fix F (pred x))) 2)
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_AppAbs</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span>
<pre>
3 * (if 2=0 then 1 else 2 * (fix F (pred 2)))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_If0_Nonzero</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span>
<pre>
3 * (2 * (fix F (pred 2)))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_FixAbs</span></span> <span class="inlinecode">+</span> <span class="inlinecode">2</span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span>
<pre>
3 * (2 * ((\x. if x=0 then 1 else x * (fix F (pred x))) (pred 2)))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_PredNat</span></span> <span class="inlinecode">+</span> <span class="inlinecode">2</span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">ST_App2</span></span>
<pre>
3 * (2 * ((\x. if x=0 then 1 else x * (fix F (pred x))) 1))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_AppAbs</span></span> <span class="inlinecode">+</span> <span class="inlinecode">2</span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span>
<pre>
3 * (2 * (if 1=0 then 1 else 1 * (fix F (pred 1))))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_If0_Nonzero</span></span> <span class="inlinecode">+</span> <span class="inlinecode">2</span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span>
<pre>
3 * (2 * (1 * (fix F (pred 1))))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_FixAbs</span></span> <span class="inlinecode">+</span> <span class="inlinecode">3</span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span>
<pre>
3 * (2 * (1 * ((\x. if x=0 then 1 else x * (fix F (pred x))) (pred 1))))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_PredNat</span></span> <span class="inlinecode">+</span> <span class="inlinecode">3</span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">ST_App2</span></span>
<pre>
3 * (2 * (1 * ((\x. if x=0 then 1 else x * (fix F (pred x))) 0)))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_AppAbs</span></span> <span class="inlinecode">+</span> <span class="inlinecode">3</span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span>
<pre>
3 * (2 * (1 * (if 0=0 then 1 else 0 * (fix F (pred 0)))))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_If0Zero</span></span> <span class="inlinecode">+</span> <span class="inlinecode">3</span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span>
<pre>
3 * (2 * (1 * 1))
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_MultNats</span></span> <span class="inlinecode">+</span> <span class="inlinecode">2</span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span>
<pre>
3 * (2 * 1)
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_MultNats</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" type="var">ST_Mult2</span></span>
<pre>
3 * 2
</pre>
<span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">ST_MultNats</span></span>
<pre>
6
</pre>

<div class="paragraph"> </div>

<a name="lab607"></a><h4 class="section">Exercise: 1 star, optional (halve_fix)</h4>
 Translate this informal recursive definition into one using <span class="inlinecode"><span class="id" type="var">fix</span></span>:
<pre>
      halve =
        &lambda;x:Nat.
           if x=0 then 0
           else if (pred x)=0 then 0
           else 1 + (halve (pred (pred x))))
</pre>
<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
<font size=-2 color="rgb(80%,80%,100%)">&#9744;</font>

<div class="paragraph"> </div>

<a name="lab608"></a><h4 class="section">Exercise: 1 star, optional (fact_steps)</h4>
 Write down the sequence of steps that the term <span class="inlinecode"><span class="id" type="var">fact</span></span> <span class="inlinecode">1</span> goes
    through to reduce to a normal form (assuming the usual reduction
    rules for arithmetic operations).

<div class="paragraph"> </div>

    <span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
<font size=-2 color="rgb(80%,80%,100%)">&#9744;</font>

<div class="paragraph"> </div>

 The ability to form the fixed point of a function of type <span class="inlinecode"><span class="id" type="var">T</span><span style="font-family: arial;">&rarr;</span><span class="id" type="var">T</span></span>
    for any <span class="inlinecode"><span class="id" type="var">T</span></span> has some surprising consequences.  In particular, it
    implies that <i>every</i> type is inhabited by some term.  To see this,
    observe that, for every type <span class="inlinecode"><span class="id" type="var">T</span></span>, we can define the term

<div class="paragraph"> </div>

<div class="code code-tight">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">fix</span>&nbsp;(\<span class="id" type="var">x</span>:<span class="id" type="var">T.x</span>)
<div class="paragraph"> </div>

</div>
    By <span class="inlinecode"><span class="id" type="var">T_Fix</span></span>  and <span class="inlinecode"><span class="id" type="var">T_Abs</span></span>, this term has type <span class="inlinecode"><span class="id" type="var">T</span></span>.  By <span class="inlinecode"><span class="id" type="var">ST_FixAbs</span></span>
    it reduces to itself, over and over again.  Thus it is an
    <i>undefined element</i> of <span class="inlinecode"><span class="id" type="var">T</span></span>.

<div class="paragraph"> </div>

    More usefully, here's an example using <span class="inlinecode"><span class="id" type="var">fix</span></span> to define a
    two-argument recursive function:
<pre>
    equal =
      fix
        (\eq:Nat-&gt;Nat-&gt;Bool.
           &lambda;m:Nat. &lambda;n:Nat.
             if m=0 then iszero n
             else if n=0 then false
             else eq (pred m) (pred n))
</pre>

<div class="paragraph"> </div>

    And finally, here is an example where <span class="inlinecode"><span class="id" type="var">fix</span></span> is used to define a
    <i>pair</i> of recursive functions (illustrating the fact that the type
    <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span></span> in the rule <span class="inlinecode"><span class="id" type="var">T_Fix</span></span> need not be a function type):
<pre>
      evenodd =
        fix
          (\eo: (Nat-&gt;Bool * Nat-&gt;Bool).
             let e = &lambda;n:Nat. if n=0 then true  else eo.snd (pred n) in
             let o = &lambda;n:Nat. if n=0 then false else eo.fst (pred n) in
             (e,o))

      even = evenodd.fst
      odd  = evenodd.snd
</pre>

</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab609"></a><h2 class="section">Records</h2>

<div class="paragraph"> </div>

 As a final example of a basic extension of the STLC, let's look
    briefly at how to define <i>records</i> and their types.  Intuitively,
    records can be obtained from pairs by two straightforward
    generalizations: they are n-ary products (rather than just binary)
    and their fields are accessed by <i>label</i> (rather than
    position). 
<div class="paragraph"> </div>

 Syntax:
<pre>
       t ::=                          Terms
           | {i<sub>1</sub>=t<sub>1</sub>, ..., in=tn}         record
           | t.i                         projection
           | ...

       v ::=                          Values
           | {i<sub>1</sub>=v<sub>1</sub>, ..., in=vn}         record value
           | ...

       T ::=                          Types
           | {i<sub>1</sub>:T<sub>1</sub>, ..., in:Tn}         record type
           | ...
</pre>
   Intuitively, the generalization from products is pretty obvious.  But 
   it's worth noticing the ways in which what we've actually written is
   even more informal than the informal syntax we've used in previous 
   sections and chapters: we've used "<span class="inlinecode">...</span>" in several places to mean "any
   number of these," and we've omitted explicit mention of the usual
   side-condition that the labels of a record should not contain
   repetitions. 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

   Reduction:
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">ti&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;ti'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Rcd) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">{i<sub>1</sub>=v<sub>1</sub>,&nbsp;...,&nbsp;im=vm,&nbsp;in=ti,&nbsp;...}</td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: arial;">&rArr;</span>&nbsp;{i<sub>1</sub>=v<sub>1</sub>,&nbsp;...,&nbsp;im=vm,&nbsp;in=ti',&nbsp;...}</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Proj1) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub>.i&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;t<sub>1</sub>'.i</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_ProjRcd) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">{...,&nbsp;i=vi,&nbsp;...}.i&nbsp;<span style="font-family: arial;">&rArr;</span>&nbsp;vi</td>
  <td></td>
</td>
</table></center>   Again, these rules are a bit informal.  For example, the first rule
   is intended to be read "if <span class="inlinecode"><span class="id" type="var">ti</span></span> is the leftmost field that is not a
   value and if <span class="inlinecode"><span class="id" type="var">ti</span></span> steps to <span class="inlinecode"><span class="id" type="var">ti'</span></span>, then the whole record steps..."
   In the last rule, the intention is that there should only be one
   field called i, and that all the other fields must contain values. 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

   The typing rules are simple:
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t<sub>1</sub>&nbsp;:&nbsp;T<sub>1</sub>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;tn&nbsp;:&nbsp;Tn</td>
  <td class="infrulenamecol" rowspan="3">
    (T_Rcd) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;{i<sub>1</sub>=t<sub>1</sub>,&nbsp;...,&nbsp;in=tn}&nbsp;:&nbsp;{i<sub>1</sub>:T<sub>1</sub>,&nbsp;...,&nbsp;in:Tn}</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t&nbsp;:&nbsp;{...,&nbsp;i:Ti,&nbsp;...}</td>
  <td class="infrulenamecol" rowspan="3">
    (T_Proj) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule"><span style="font-family: serif; font-size:85%;">&Gamma;</span>&nbsp;<span style="font-family: arial;">&#8866;</span>&nbsp;t.i&nbsp;:&nbsp;Ti</td>
  <td></td>
</td>
</table></center>
<div class="paragraph"> </div>

 There are several ways to approach formalizing the above
    definitions.

<div class="paragraph"> </div>

<ul class="doclist">
<li> We can directly formalize the syntactic forms and inference
        rules, staying as close as possible to the form we've given
        them above.  This is conceptually straightforward, and it's
        probably what we'd want to do if we were building a real
        compiler (in particular, it will allow us to print error
        messages in the form that programmers will find easy to
        understand).  But the formal versions of the rules will not be
        very pretty or easy to work with, because all the <span class="inlinecode">...</span>s above
        will have to be replaced with explicit quantifications or
        comprehensions.  For this reason, records are not included in
        the extended exercise at the end of this chapter.  (It is
        still useful to discuss them informally here because they will
        help motivate the addition of subtyping to the type system
        when we get to the <a href="Sub.html"><span class="inlineref">Sub</span></a> chapter.)

<div class="paragraph"> </div>


</li>
<li> Alternatively, we could look for a smoother way of presenting
        records &mdash; for example, a binary presentation with one
        constructor for the empty record and another constructor for
        adding a single field to an existing record, instead of a
        single monolithic constructor that builds a whole record at
        once.  This is the right way to go if we are primarily
        interested in studying the metatheory of the calculi with
        records, since it leads to clean and elegant definitions and
        proofs.  Chapter <a href="Records.html"><span class="inlineref">Records</span></a> shows how this can be done.

<div class="paragraph"> </div>


</li>
<li> Finally, if we like, we can avoid formalizing records
        altogether, by stipulating that record notations are just
        informal shorthands for more complex expressions involving
        pairs and product types.  We sketch this approach in the next
        section. 
</li>
</ul>

</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab610"></a><h3 class="section">Encoding Records (Optional)</h3>

<div class="paragraph"> </div>

 First, observe that we can encode arbitrary-size tuples using
    nested pairs and the <span class="inlinecode"><span class="id" type="var">unit</span></span> value.  To avoid overloading the pair
    notation <span class="inlinecode">(<span class="id" type="var">t<sub>1</sub></span>,<span class="id" type="var">t<sub>2</sub></span>)</span>, we'll use curly braces without labels to write
    down tuples, so <span class="inlinecode">{}</span> is the empty tuple, <span class="inlinecode">{5}</span> is a singleton
    tuple, <span class="inlinecode">{5,6}</span> is a 2-tuple (morally the same as a pair),
    <span class="inlinecode">{5,6,7}</span> is a triple, etc.
<pre>
      {}                 ----&gt;  unit
      {t<sub>1</sub>, t<sub>2</sub>, ..., tn}  ----&gt;  (t<sub>1</sub>, trest)
                                where {t<sub>2</sub>, ..., tn} ----&gt; trest
</pre>
    Similarly, we can encode tuple types using nested product types:
<pre>
      {}                 ----&gt;  Unit
      {T<sub>1</sub>, T<sub>2</sub>, ..., Tn}  ----&gt;  T<sub>1</sub> * TRest
                                where {T<sub>2</sub>, ..., Tn} ----&gt; TRest
</pre>
    The operation of projecting a field from a tuple can be encoded
    using a sequence of second projections followed by a first projection:
<pre>
      t.0        ----&gt;  t.fst
      t.(n+1)    ----&gt;  (t.snd).n
</pre>
    Next, suppose that there is some total ordering on record labels,
    so that we can associate each label with a unique natural number.
    This number is called the <i>position</i> of the label.  For example,
    we might assign positions like this:
<pre>
      LABEL   POSITION
      a       0
      b       1
      c       2
      ...     ...
      bar     1395
      ...     ...
      foo     4460
      ...     ...
</pre>
    We use these positions to encode record values as tuples (i.e., as
    nested pairs) by sorting the fields according to their positions.
    For example:
<pre>
      {a=5, b=6}      ----&gt;   {5,6}
      {a=5, c=7}      ----&gt;   {5,unit,7}
      {c=7, a=5}      ----&gt;   {5,unit,7}
      {c=5, b=3}      ----&gt;   {unit,3,5}
      {f=8,c=5,a=7}   ----&gt;   {7,unit,5,unit,unit,8}
      {f=8,c=5}       ----&gt;   {unit,unit,5,unit,unit,8}
</pre>
    Note that each field appears in the position associated with its
    label, that the size of the tuple is determined by the label with
    the highest position, and that we fill in unused positions with
    <span class="inlinecode"><span class="id" type="var">unit</span></span>.

<div class="paragraph"> </div>

    We do exactly the same thing with record types:
<pre>
      {a:Nat, b:Nat}      ----&gt;   {Nat,Nat}
      {c:Nat, a:Nat}      ----&gt;   {Nat,Unit,Nat}
      {f:Nat,c:Nat}       ----&gt;   {Unit,Unit,Nat,Unit,Unit,Nat}
</pre>
    Finally, record projection is encoded as a tuple projection from
    the appropriate position:
<pre>
      t.l  ----&gt;  t.(position of l)
</pre>
    It is not hard to check that all the typing rules for the original
    "direct" presentation of records are validated by this
    encoding.  (The reduction rules are "almost validated" &mdash; not
    quite, because the encoding reorders fields.) 
<div class="paragraph"> </div>

 Of course, this encoding will not be very efficient if we
    happen to use a record with label <span class="inlinecode"><span class="id" type="var">foo</span></span>!  But things are not
    actually as bad as they might seem: for example, if we assume that
    our compiler can see the whole program at the same time, we can
    <i>choose</i> the numbering of labels so that we assign small positions
    to the most frequently used labels.  Indeed, there are industrial
    compilers that essentially do this! 
<div class="paragraph"> </div>

<a name="lab611"></a><h3 class="section">Variants (Optional)</h3>

<div class="paragraph"> </div>

 Just as products can be generalized to records, sums can be
    generalized to n-ary labeled types called <i>variants</i>.  Instead of
    <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span>+<span class="id" type="var">T<sub>2</sub></span></span>, we can write something like <span class="inlinecode">&lt;<span class="id" type="var">l<sub>1</sub></span>:<span class="id" type="var">T<sub>1</sub></span>,<span class="id" type="var">l<sub>2</sub></span>:<span class="id" type="var">T<sub>2</sub></span>,...<span class="id" type="var">ln</span>:<span class="id" type="var">Tn</span>&gt;</span>
    where <span class="inlinecode"><span class="id" type="var">l<sub>1</sub></span></span>,<span class="inlinecode"><span class="id" type="var">l<sub>2</sub></span></span>,... are field labels which are used both to build
    instances and as case arm labels.

<div class="paragraph"> </div>

    These n-ary variants give us almost enough mechanism to build
    arbitrary inductive data types like lists and trees from
    scratch &mdash; the only thing missing is a way to allow <i>recursion</i> in
    type definitions.  We won't cover this here, but detailed
    treatments can be found in many textbooks &mdash; e.g., Types and
    Programming Languages. 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab612"></a><h1 class="section">Exercise: Formalizing the Extensions</h1>

<div class="paragraph"> </div>

<a name="lab613"></a><h4 class="section">Exercise: 4 stars (STLC_extensions)</h4>
 In this exercise, you will formalize some of the extensions
    described in this chapter.  We've provided the necessary additions
    to the syntax of terms and types, and we've included a few
    examples that you can test your definitions with to make sure they
    are working as expected.  You'll fill in the rest of the
    definitions and extend all the proofs accordingly.

<div class="paragraph"> </div>

    To get you started, we've provided implementations for:

<div class="paragraph"> </div>

<ul class="doclist">
<li> numbers

</li>
<li> pairs and units

</li>
<li> sums

</li>
<li> lists

</li>
</ul>

<div class="paragraph"> </div>

    You need to complete the implementations for:

<div class="paragraph"> </div>

<ul class="doclist">
<li> let (which involves binding)

</li>
<li> <span class="inlinecode"><span class="id" type="var">fix</span></span>

</li>
</ul>

<div class="paragraph"> </div>

    A good strategy is to work on the extensions one at a time, in two
    passes, rather than trying to work through the file from start to
    finish in a single pass.  For each definition or proof, begin by
    reading carefully through the parts that are provided for you,
    referring to the text in the <a href="Stlc.html"><span class="inlineref">Stlc</span></a> chapter for high-level
    intuitions and the embedded comments for detailed mechanics. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended"><span class="id" type="module">STLCExtended</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab614"></a><h3 class="section">Syntax and Operational Semantics</h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="STLCExtended.ty"><span class="id" type="inductive">ty</span></a> : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="STLCExtended.TArrow"><span class="id" type="constructor">TArrow</span></a> : <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.TNat"><span class="id" type="constructor">TNat</span></a>   : <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.TUnit"><span class="id" type="constructor">TUnit</span></a>  : <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.TProd"><span class="id" type="constructor">TProd</span></a>  : <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.TSum"><span class="id" type="constructor">TSum</span></a>   : <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.TList"><span class="id" type="constructor">TList</span></a>  : <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#ty"><span class="id" type="inductive">ty</span></a>.<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="STLCExtended.tm"><span class="id" type="inductive">tm</span></a> : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;pure&nbsp;STLC&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tvar"><span class="id" type="constructor">tvar</span></a> : <a class="idref" href="Maps.html#id"><span class="id" type="inductive">id</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tabs"><span class="id" type="constructor">tabs</span></a> : <a class="idref" href="Maps.html#id"><span class="id" type="inductive">id</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#STLCExtended.ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;numbers&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> : <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tsucc"><span class="id" type="constructor">tsucc</span></a> : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tpred"><span class="id" type="constructor">tpred</span></a> : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a>  : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;pairs&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tfst"><span class="id" type="constructor">tfst</span></a> : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tsnd"><span class="id" type="constructor">tsnd</span></a> : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;units&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tunit"><span class="id" type="constructor">tunit</span></a> : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;let&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tlet"><span class="id" type="constructor">tlet</span></a> : <a class="idref" href="Maps.html#id"><span class="id" type="inductive">id</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;i.e.,&nbsp;<span class="inlinecode"><span class="id" type="keyword">let</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode"><span class="id" type="keyword">in</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;sums&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tinl"><span class="id" type="constructor">tinl</span></a> : <a class="idref" href="MoreStlc.html#STLCExtended.ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tinr"><span class="id" type="constructor">tinr</span></a> : <a class="idref" href="MoreStlc.html#STLCExtended.ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="Maps.html#id"><span class="id" type="inductive">id</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="Maps.html#id"><span class="id" type="inductive">id</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;i.e.,&nbsp;<span class="inlinecode"><span class="id" type="tactic">case</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>0</sub></span></span> <span class="inlinecode"><span class="id" type="var">of</span></span> <span class="inlinecode"><span class="id" type="var">inl</span></span> <span class="inlinecode"><span class="id" type="var">x<sub>1</sub></span></span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" type="var">inr</span></span> <span class="inlinecode"><span class="id" type="var">x<sub>2</sub></span></span> <span class="inlinecode">⇒</span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;lists&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tnil"><span class="id" type="constructor">tnil</span></a> : <a class="idref" href="MoreStlc.html#STLCExtended.ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="Maps.html#id"><span class="id" type="inductive">id</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="Maps.html#id"><span class="id" type="inductive">id</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;i.e.,&nbsp;<span class="inlinecode"><span class="id" type="var">lcase</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode"><span class="id" type="var">of</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" type="var">nil</span></span> <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" type="var">x</span>::<span class="id" type="var">y</span></span> <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>3</sub></span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;fix&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.tfix"><span class="id" type="constructor">tfix</span></a>  : <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#tm"><span class="id" type="inductive">tm</span></a>.<br/>

<br/>
</div>

<div class="doc">
Note that, for brevity, we've omitted booleans and instead
    provided a single <span class="inlinecode"><span class="id" type="var">if<sub>0</sub></span></span> form combining a zero test and a
    conditional.  That is, instead of writing
<pre>
       if x = 0 then ... else ...
</pre>
    we'll write this:
<pre>
       if<sub>0</sub> x then ... else ...
</pre>

</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab615"></a><h3 class="section">Substitution</h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="STLCExtended.subst"><span class="id" type="definition">subst</span></a> (<span class="id" type="var">x</span>:<a class="idref" href="Maps.html#id"><span class="id" type="inductive">id</span></a>) (<span class="id" type="var">s</span>:<a class="idref" href="MoreStlc.html#STLCExtended.tm"><span class="id" type="inductive">tm</span></a>) (<span class="id" type="var">t</span>:<a class="idref" href="MoreStlc.html#STLCExtended.tm"><span class="id" type="inductive">tm</span></a>) : <a class="idref" href="MoreStlc.html#STLCExtended.tm"><span class="id" type="inductive">tm</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tvar"><span class="id" type="constructor">tvar</span></a> <span class="id" type="var">y</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">if</span> <a class="idref" href="Maps.html#beq_id"><span class="id" type="definition">beq_id</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <span class="id" type="var">y</span> <span class="id" type="keyword">then</span> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="keyword">else</span> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tabs"><span class="id" type="constructor">tabs</span></a> <span class="id" type="var">y</span> <span class="id" type="var">T</span> <span class="id" type="var">t<sub>1</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tabs"><span class="id" type="constructor">tabs</span></a> <span class="id" type="var">y</span> <span class="id" type="var">T</span> (<span class="id" type="keyword">if</span> <a class="idref" href="Maps.html#beq_id"><span class="id" type="definition">beq_id</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <span class="id" type="var">y</span> <span class="id" type="keyword">then</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="keyword">else</span> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>) (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>2</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> <span class="id" type="var">n</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> <span class="id" type="var">n</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tsucc"><span class="id" type="constructor">tsucc</span></a> <span class="id" type="var">t<sub>1</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tsucc"><span class="id" type="constructor">tsucc</span></a> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tpred"><span class="id" type="constructor">tpred</span></a> <span class="id" type="var">t<sub>1</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tpred"><span class="id" type="constructor">tpred</span></a> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>) (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>2</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>) (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>2</sub></span>) (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>3</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>) (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>2</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tfst"><span class="id" type="constructor">tfst</span></a> <span class="id" type="var">t<sub>1</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tfst"><span class="id" type="constructor">tfst</span></a> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tsnd"><span class="id" type="constructor">tsnd</span></a> <span class="id" type="var">t<sub>1</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tsnd"><span class="id" type="constructor">tsnd</span></a> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tunit"><span class="id" type="constructor">tunit</span></a> ⇒ <a class="idref" href="MoreStlc.html#STLCExtended.tunit"><span class="id" type="constructor">tunit</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tinl"><span class="id" type="constructor">tinl</span></a> <span class="id" type="var">T</span> <span class="id" type="var">t<sub>1</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tinl"><span class="id" type="constructor">tinl</span></a> <span class="id" type="var">T</span> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tinr"><span class="id" type="constructor">tinr</span></a> <span class="id" type="var">T</span> <span class="id" type="var">t<sub>1</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tinr"><span class="id" type="constructor">tinr</span></a> <span class="id" type="var">T</span> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> <span class="id" type="var">t<sub>0</sub></span> <span class="id" type="var">y<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">y<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>0</sub></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">y<sub>1</sub></span> (<span class="id" type="keyword">if</span> <a class="idref" href="Maps.html#beq_id"><span class="id" type="definition">beq_id</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <span class="id" type="var">y<sub>1</sub></span> <span class="id" type="keyword">then</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="keyword">else</span> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">y<sub>2</sub></span> (<span class="id" type="keyword">if</span> <a class="idref" href="Maps.html#beq_id"><span class="id" type="definition">beq_id</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <span class="id" type="var">y<sub>2</sub></span> <span class="id" type="keyword">then</span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="keyword">else</span> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>2</sub></span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tnil"><span class="id" type="constructor">tnil</span></a> <span class="id" type="var">T</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tnil"><span class="id" type="constructor">tnil</span></a> <span class="id" type="var">T</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>) (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>2</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MoreStlc.html#STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">y<sub>1</sub></span> <span class="id" type="var">y<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>1</sub></span>) (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>2</sub></span>) <span class="id" type="var">y<sub>1</sub></span> <span class="id" type="var">y<sub>2</sub></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">if</span> <a class="idref" href="Maps.html#beq_id"><span class="id" type="definition">beq_id</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <span class="id" type="var">y<sub>1</sub></span> <span class="id" type="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">t<sub>3</sub></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">else</span> <span class="id" type="keyword">if</span> <a class="idref" href="Maps.html#beq_id"><span class="id" type="definition">beq_id</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <span class="id" type="var">y<sub>2</sub></span> <span class="id" type="keyword">then</span> <span class="id" type="var">t<sub>3</sub></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">else</span> (<a class="idref" href="MoreStlc.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#s"><span class="id" type="variable">s</span></a> <span class="id" type="var">t<sub>3</sub></span>))<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a>  <span class="comment">(*&nbsp;...&nbsp;and&nbsp;delete&nbsp;this&nbsp;line&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Notation</span> "'[' x ':=' s ']' t" := (<a class="idref" href="MoreStlc.html#STLCExtended.subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">x</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span>) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 20).<br/>

<br/>
</div>

<div class="doc">
<a name="lab616"></a><h3 class="section">Reduction</h3>

<div class="paragraph"> </div>

 Next we define the values of our language. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="STLCExtended.value"><span class="id" type="inductive">value</span></a> : <a class="idref" href="MoreStlc.html#STLCExtended.tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="STLCExtended.v_abs"><span class="id" type="constructor">v_abs</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">T<sub>11</sub></span> <span class="id" type="var">t<sub>12</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#T<sub>11</sub>"><span class="id" type="variable">T<sub>11</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>12</sub>"><span class="id" type="variable">t<sub>12</sub></span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Numbers&nbsp;are&nbsp;values:&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.v_nat"><span class="id" type="constructor">v_nat</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">n<sub>1</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> <a class="idref" href="MoreStlc.html#n<sub>1</sub>"><span class="id" type="variable">n<sub>1</sub></span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;pair&nbsp;is&nbsp;a&nbsp;value&nbsp;if&nbsp;both&nbsp;components&nbsp;are:&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.v_pair"><span class="id" type="constructor">v_pair</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v<sub>1</sub></span> <span class="id" type="var">v<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>2</sub>"><span class="id" type="variable">v<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#v<sub>2</sub>"><span class="id" type="variable">v<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;unit&nbsp;is&nbsp;always&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.v_unit"><span class="id" type="constructor">v_unit</span></a> : <a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.tunit"><span class="id" type="constructor">tunit</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;tagged&nbsp;value&nbsp;is&nbsp;a&nbsp;value:&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.v_inl"><span class="id" type="constructor">v_inl</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v</span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v"><span class="id" type="variable">v</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tinl"><span class="id" type="constructor">tinl</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <a class="idref" href="MoreStlc.html#v"><span class="id" type="variable">v</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.v_inr"><span class="id" type="constructor">v_inr</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v</span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v"><span class="id" type="variable">v</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tinr"><span class="id" type="constructor">tinr</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <a class="idref" href="MoreStlc.html#v"><span class="id" type="variable">v</span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;list&nbsp;is&nbsp;a&nbsp;value&nbsp;iff&nbsp;its&nbsp;head&nbsp;and&nbsp;tail&nbsp;are&nbsp;values:&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.v_lnil"><span class="id" type="constructor">v_lnil</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">T</span>, <a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tnil"><span class="id" type="constructor">tnil</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.v_lcons"><span class="id" type="constructor">v_lcons</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v<sub>1</sub></span> <span class="id" type="var">vl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#vl"><span class="id" type="variable">vl</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#vl"><span class="id" type="variable">vl</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="var">Constructors</span> <a class="idref" href="MoreStlc.html#value"><span class="id" type="inductive">value</span></a>.<br/>

<br/>
<span class="id" type="keyword">Reserved Notation</span> "t<sub>1</sub> '<span style="font-family: arial;">&rArr;</span>' t<sub>2</sub>" (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 40).<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="STLCExtended.step"><span class="id" type="inductive">step</span></a> : <a class="idref" href="MoreStlc.html#STLCExtended.tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#STLCExtended.tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_AppAbs"><span class="id" type="constructor">ST_AppAbs</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">T<sub>11</sub></span> <span class="id" type="var">t<sub>12</sub></span> <span class="id" type="var">v<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>2</sub>"><span class="id" type="variable">v<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#T<sub>11</sub>"><span class="id" type="variable">T<sub>11</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>12</sub>"><span class="id" type="variable">t<sub>12</sub></span></a>) <a class="idref" href="MoreStlc.html#v<sub>2</sub>"><span class="id" type="variable">v<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> [<a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a>:=<a class="idref" href="MoreStlc.html#v<sub>2</sub>"><span class="id" type="variable">v<sub>2</sub></span></a>]<a class="idref" href="MoreStlc.html#t<sub>12</sub>"><span class="id" type="variable">t<sub>12</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_App1"><span class="id" type="constructor">ST_App1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_App2"><span class="id" type="constructor">ST_App2</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub>'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>'"><span class="id" type="variable">t<sub>2</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>'"><span class="id" type="variable">t<sub>2</sub>'</span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;nats&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Succ1"><span class="id" type="constructor">ST_Succ1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tsucc"><span class="id" type="constructor">tsucc</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tsucc"><span class="id" type="constructor">tsucc</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_SuccNat"><span class="id" type="constructor">ST_SuccNat</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">n<sub>1</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tsucc"><span class="id" type="constructor">tsucc</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> <a class="idref" href="MoreStlc.html#n<sub>1</sub>"><span class="id" type="variable">n<sub>1</sub></span></a>)) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="MoreStlc.html#n<sub>1</sub>"><span class="id" type="variable">n<sub>1</sub></span></a>))<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Pred"><span class="id" type="constructor">ST_Pred</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tpred"><span class="id" type="constructor">tpred</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tpred"><span class="id" type="constructor">tpred</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_PredNat"><span class="id" type="constructor">ST_PredNat</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">n<sub>1</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tpred"><span class="id" type="constructor">tpred</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> <a class="idref" href="MoreStlc.html#n<sub>1</sub>"><span class="id" type="variable">n<sub>1</sub></span></a>)) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Peano.html#pred"><span class="id" type="abbreviation">pred</span></a> <a class="idref" href="MoreStlc.html#n<sub>1</sub>"><span class="id" type="variable">n<sub>1</sub></span></a>))<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Mult1"><span class="id" type="constructor">ST_Mult1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Mult2"><span class="id" type="constructor">ST_Mult2</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub>'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>'"><span class="id" type="variable">t<sub>2</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>'"><span class="id" type="variable">t<sub>2</sub>'</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_MultNats"><span class="id" type="constructor">ST_MultNats</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">n<sub>1</sub></span> <span class="id" type="var">n<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> <a class="idref" href="MoreStlc.html#n<sub>1</sub>"><span class="id" type="variable">n<sub>1</sub></span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> <a class="idref" href="MoreStlc.html#n<sub>2</sub>"><span class="id" type="variable">n<sub>2</sub></span></a>)) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Peano.html#mult"><span class="id" type="abbreviation">mult</span></a> <a class="idref" href="MoreStlc.html#n<sub>1</sub>"><span class="id" type="variable">n<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#n<sub>2</sub>"><span class="id" type="variable">n<sub>2</sub></span></a>))<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_If<sub>01</sub>"><span class="id" type="constructor">ST_If<sub>01</sub></span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_If0Zero"><span class="id" type="constructor">ST_If0Zero</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> 0) <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>) <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_If0Nonzero"><span class="id" type="constructor">ST_If0Nonzero</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">n</span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="MoreStlc.html#n"><span class="id" type="variable">n</span></a>)) <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>) <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;pairs&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Pair1"><span class="id" type="constructor">ST_Pair1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Pair2"><span class="id" type="constructor">ST_Pair2</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub>'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>'"><span class="id" type="variable">t<sub>2</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>'"><span class="id" type="variable">t<sub>2</sub>'</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Fst1"><span class="id" type="constructor">ST_Fst1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tfst"><span class="id" type="constructor">tfst</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tfst"><span class="id" type="constructor">tfst</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_FstPair"><span class="id" type="constructor">ST_FstPair</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v<sub>1</sub></span> <span class="id" type="var">v<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>2</sub>"><span class="id" type="variable">v<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tfst"><span class="id" type="constructor">tfst</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#v<sub>2</sub>"><span class="id" type="variable">v<sub>2</sub></span></a>)) <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Snd1"><span class="id" type="constructor">ST_Snd1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tsnd"><span class="id" type="constructor">tsnd</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tsnd"><span class="id" type="constructor">tsnd</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_SndPair"><span class="id" type="constructor">ST_SndPair</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v<sub>1</sub></span> <span class="id" type="var">v<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>2</sub>"><span class="id" type="variable">v<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tsnd"><span class="id" type="constructor">tsnd</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#v<sub>2</sub>"><span class="id" type="variable">v<sub>2</sub></span></a>)) <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#v<sub>2</sub>"><span class="id" type="variable">v<sub>2</sub></span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;let&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;sums&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Inl"><span class="id" type="constructor">ST_Inl</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tinl"><span class="id" type="constructor">tinl</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tinl"><span class="id" type="constructor">tinl</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Inr"><span class="id" type="constructor">ST_Inr</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tinr"><span class="id" type="constructor">tinr</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tinr"><span class="id" type="constructor">tinr</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Case"><span class="id" type="constructor">ST_Case</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>0</sub></span> <span class="id" type="var">t<sub>0</sub>'</span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>0</sub>"><span class="id" type="variable">t<sub>0</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>0</sub>'"><span class="id" type="variable">t<sub>0</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>0</sub>"><span class="id" type="variable">t<sub>0</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>0</sub>'"><span class="id" type="variable">t<sub>0</sub>'</span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_CaseInl"><span class="id" type="constructor">ST_CaseInl</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v<sub>0</sub></span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>0</sub>"><span class="id" type="variable">v<sub>0</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tinl"><span class="id" type="constructor">tinl</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <a class="idref" href="MoreStlc.html#v<sub>0</sub>"><span class="id" type="variable">v<sub>0</sub></span></a>) <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> [<a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a>:=<a class="idref" href="MoreStlc.html#v<sub>0</sub>"><span class="id" type="variable">v<sub>0</sub></span></a>]<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_CaseInr"><span class="id" type="constructor">ST_CaseInr</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v<sub>0</sub></span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>0</sub>"><span class="id" type="variable">v<sub>0</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tinr"><span class="id" type="constructor">tinr</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <a class="idref" href="MoreStlc.html#v<sub>0</sub>"><span class="id" type="variable">v<sub>0</sub></span></a>) <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> [<a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a>:=<a class="idref" href="MoreStlc.html#v<sub>0</sub>"><span class="id" type="variable">v<sub>0</sub></span></a>]<a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;lists&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Cons1"><span class="id" type="constructor">ST_Cons1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Cons2"><span class="id" type="constructor">ST_Cons2</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub>'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>'"><span class="id" type="variable">t<sub>2</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>'"><span class="id" type="variable">t<sub>2</sub>'</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_Lcase1"><span class="id" type="constructor">ST_Lcase1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>'"><span class="id" type="variable">t<sub>1</sub>'</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_LcaseNil"><span class="id" type="constructor">ST_LcaseNil</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">T</span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tnil"><span class="id" type="constructor">tnil</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a>) <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>) <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.ST_LcaseCons"><span class="id" type="constructor">ST_LcaseCons</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">v<sub>1</sub></span> <span class="id" type="var">vl</span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a>  <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#vl"><span class="id" type="variable">vl</span></a>  <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#vl"><span class="id" type="variable">vl</span></a>) <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>) <span style="font-family: arial;">&rArr;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#vl"><span class="id" type="variable">vl</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#v<sub>1</sub>"><span class="id" type="variable">v<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>))<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;fix&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
<br/>
<span class="id" type="keyword">where</span> "t<sub>1</sub> '<span style="font-family: arial;">&rArr;</span>' t<sub>2</sub>" := (<a class="idref" href="MoreStlc.html#step"><span class="id" type="inductive">step</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>).<br/>

<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.multistep"><span class="id" type="abbreviation">multistep</span></a> := (<a class="idref" href="Smallstep.html#multi"><span class="id" type="inductive">multi</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.step"><span class="id" type="inductive">step</span></a>).<br/>
<span class="id" type="keyword">Notation</span> "t<sub>1</sub> '<span style="font-family: arial;">&rArr;*</span>' t<sub>2</sub>" := (<a class="idref" href="MoreStlc.html#STLCExtended.multistep"><span class="id" type="abbreviation">multistep</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 40).<br/>

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="var">Constructors</span> <a class="idref" href="MoreStlc.html#step"><span class="id" type="inductive">step</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab617"></a><h3 class="section">Typing</h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Definition</span> <a name="STLCExtended.context"><span class="id" type="definition">context</span></a> := <a class="idref" href="Maps.html#partial_map"><span class="id" type="definition">partial_map</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.ty"><span class="id" type="inductive">ty</span></a>.<br/>

<br/>
</div>

<div class="doc">
Next we define the typing rules.  These are nearly direct
    transcriptions of the inference rules shown above. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Reserved Notation</span> "Gamma '<span style="font-family: arial;">&#8866;</span>' t '&#x2208;' T" (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 40).<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="STLCExtended.has_type"><span class="id" type="inductive">has_type</span></a> : <a class="idref" href="MoreStlc.html#STLCExtended.context"><span class="id" type="definition">context</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#STLCExtended.tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#STLCExtended.ty"><span class="id" type="inductive">ty</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Typing&nbsp;rules&nbsp;for&nbsp;proper&nbsp;terms&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Var"><span class="id" type="constructor">T_Var</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">x</span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> = <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a>) &#x2208; <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Abs"><span class="id" type="constructor">T_Abs</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">x</span> <span class="id" type="var">T<sub>11</sub></span> <span class="id" type="var">T<sub>12</sub></span> <span class="id" type="var">t<sub>12</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#T<sub>11</sub>"><span class="id" type="variable">T<sub>11</sub></span></a>) <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>12</sub>"><span class="id" type="variable">t<sub>12</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T<sub>12</sub>"><span class="id" type="variable">T<sub>12</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#T<sub>11</sub>"><span class="id" type="variable">T<sub>11</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>12</sub>"><span class="id" type="variable">t<sub>12</sub></span></a>) &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TArrow"><span class="id" type="constructor">TArrow</span></a> <a class="idref" href="MoreStlc.html#T<sub>11</sub>"><span class="id" type="variable">T<sub>11</sub></span></a> <a class="idref" href="MoreStlc.html#T<sub>12</sub>"><span class="id" type="variable">T<sub>12</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_App"><span class="id" type="constructor">T_App</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">T<sub>1</sub></span> <span class="id" type="var">T<sub>2</sub></span> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TArrow"><span class="id" type="constructor">TArrow</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) &#x2208; <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;nats&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Nat"><span class="id" type="constructor">T_Nat</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">n<sub>1</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> <a class="idref" href="MoreStlc.html#n<sub>1</sub>"><span class="id" type="variable">n<sub>1</sub></span></a>) &#x2208; <a class="idref" href="MoreStlc.html#STLCExtended.TNat"><span class="id" type="constructor">TNat</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Succ"><span class="id" type="constructor">T_Succ</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t<sub>1</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#STLCExtended.TNat"><span class="id" type="constructor">TNat</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tsucc"><span class="id" type="constructor">tsucc</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a>) &#x2208; <a class="idref" href="MoreStlc.html#STLCExtended.TNat"><span class="id" type="constructor">TNat</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Pred"><span class="id" type="constructor">T_Pred</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t<sub>1</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#STLCExtended.TNat"><span class="id" type="constructor">TNat</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tpred"><span class="id" type="constructor">tpred</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a>) &#x2208; <a class="idref" href="MoreStlc.html#STLCExtended.TNat"><span class="id" type="constructor">TNat</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Mult"><span class="id" type="constructor">T_Mult</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#STLCExtended.TNat"><span class="id" type="constructor">TNat</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#STLCExtended.TNat"><span class="id" type="constructor">TNat</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) &#x2208; <a class="idref" href="MoreStlc.html#STLCExtended.TNat"><span class="id" type="constructor">TNat</span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_If<sub>0</sub>"><span class="id" type="constructor">T_If<sub>0</sub></span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span> <span class="id" type="var">T<sub>1</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#STLCExtended.TNat"><span class="id" type="constructor">TNat</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>) &#x2208; <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;pairs&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Pair"><span class="id" type="constructor">T_Pair</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">T<sub>1</sub></span> <span class="id" type="var">T<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TProd"><span class="id" type="constructor">TProd</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Fst"><span class="id" type="constructor">T_Fst</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t</span> <span class="id" type="var">T<sub>1</sub></span> <span class="id" type="var">T<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TProd"><span class="id" type="constructor">TProd</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tfst"><span class="id" type="constructor">tfst</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a>) &#x2208; <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Snd"><span class="id" type="constructor">T_Snd</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t</span> <span class="id" type="var">T<sub>1</sub></span> <span class="id" type="var">T<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TProd"><span class="id" type="constructor">TProd</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tsnd"><span class="id" type="constructor">tsnd</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a>) &#x2208; <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;unit&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Unit"><span class="id" type="constructor">T_Unit</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#STLCExtended.tunit"><span class="id" type="constructor">tunit</span></a> &#x2208; <a class="idref" href="MoreStlc.html#STLCExtended.TUnit"><span class="id" type="constructor">TUnit</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;let&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;sums&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Inl"><span class="id" type="constructor">T_Inl</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">T<sub>1</sub></span> <span class="id" type="var">T<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tinl"><span class="id" type="constructor">tinl</span></a> <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a>) &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TSum"><span class="id" type="constructor">TSum</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Inr"><span class="id" type="constructor">T_Inr</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">T<sub>1</sub></span> <span class="id" type="var">T<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tinr"><span class="id" type="constructor">tinr</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TSum"><span class="id" type="constructor">TSum</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Case"><span class="id" type="constructor">T_Case</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t<sub>0</sub></span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">T<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">T<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>0</sub>"><span class="id" type="variable">t<sub>0</sub></span></a> &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TSum"><span class="id" type="constructor">TSum</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a>) <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a>) <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>0</sub>"><span class="id" type="variable">t<sub>0</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) &#x2208; <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;lists&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Nil"><span class="id" type="constructor">T_Nil</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tnil"><span class="id" type="constructor">tnil</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a>) &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TList"><span class="id" type="constructor">TList</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Cons"><span class="id" type="constructor">T_Cons</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">T<sub>1</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TList"><span class="id" type="constructor">TList</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>) &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TList"><span class="id" type="constructor">TList</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.T_Lcase"><span class="id" type="constructor">T_Lcase</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">T<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span> <span class="id" type="var">T<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> &#x2208; (<a class="idref" href="MoreStlc.html#STLCExtended.TList"><span class="id" type="constructor">TList</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a> (<a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.TList"><span class="id" type="constructor">TList</span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a>)) <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#T<sub>1</sub>"><span class="id" type="variable">T<sub>1</sub></span></a>) <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a> &#x2208; <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> (<a class="idref" href="MoreStlc.html#STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>) &#x2208; <a class="idref" href="MoreStlc.html#T<sub>2</sub>"><span class="id" type="variable">T<sub>2</sub></span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;fix&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
<br/>
<span class="id" type="keyword">where</span> "Gamma '<span style="font-family: arial;">&#8866;</span>' t '&#x2208;' T" := (<a class="idref" href="MoreStlc.html#has_type"><span class="id" type="inductive">has_type</span></a> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">t</span> <span class="id" type="var">T</span>).<br/>

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="var">Constructors</span> <a class="idref" href="MoreStlc.html#has_type"><span class="id" type="inductive">has_type</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab618"></a><h2 class="section">Examples</h2>

<div class="paragraph"> </div>

 This section presents formalized versions of the examples from
    above (plus several more).  The ones at the beginning focus on
    specific features; you can use these to make sure your definition
    of a given feature is reasonable before moving on to extending the
    proofs later in the file with the cases relating to this feature.
    The later examples require all the features together, so you'll
    need to come back to these when you've got all the definitions
    filled in. 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended.Examples"><span class="id" type="module">Examples</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab619"></a><h3 class="section">Preliminaries</h3>

<div class="paragraph"> </div>

 First, let's define a few variable names: 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.a"><span class="id" type="abbreviation">a</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 0).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.f"><span class="id" type="abbreviation">f</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 1).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.g"><span class="id" type="abbreviation">g</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 2).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.l"><span class="id" type="abbreviation">l</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 3).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.k"><span class="id" type="abbreviation">k</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 6).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.i1"><span class="id" type="abbreviation">i<sub>1</sub></span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 7).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.i2"><span class="id" type="abbreviation">i<sub>2</sub></span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 8).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.x"><span class="id" type="abbreviation">x</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 9).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.y"><span class="id" type="abbreviation">y</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 10).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.processSum"><span class="id" type="abbreviation">processSum</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 11).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.n"><span class="id" type="abbreviation">n</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 12).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.eq"><span class="id" type="abbreviation">eq</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 13).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.m"><span class="id" type="abbreviation">m</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 14).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.evenodd"><span class="id" type="abbreviation">evenodd</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 15).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.even"><span class="id" type="abbreviation">even</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 16).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.odd"><span class="id" type="abbreviation">odd</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 17).<br/>
<span class="id" type="keyword">Notation</span> <a name="STLCExtended.Examples.eo"><span class="id" type="abbreviation">eo</span></a> := (<a class="idref" href="Maps.html#Id"><span class="id" type="constructor">Id</span></a> 18).<br/>

<br/>
</div>

<div class="doc">
Next, a bit of Coq hackery to automate searching for typing
    derivations.  You don't need to understand this bit in detail &mdash;
    just have a look over it so that you'll know what to look for if
    you ever find yourself needing to make custom extensions to
    <span class="inlinecode"><span class="id" type="tactic">auto</span></span>.

<div class="paragraph"> </div>

    The following <span class="inlinecode"><span class="id" type="keyword">Hint</span></span> declarations say that, whenever <span class="inlinecode"><span class="id" type="tactic">auto</span></span>
    arrives at a goal of the form <span class="inlinecode">(<span style="font-family: serif; font-size:85%;">&Gamma;</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode">(<span class="id" type="var">tapp</span></span> <span class="inlinecode"><span class="id" type="var">e<sub>1</sub></span></span> <span class="inlinecode"><span class="id" type="var">e<sub>1</sub></span>)</span> <span class="inlinecode">&#x2208;</span> <span class="inlinecode"><span class="id" type="var">T</span>)</span>, it
    should consider <span class="inlinecode"><span class="id" type="tactic">eapply</span></span> <span class="inlinecode"><span class="id" type="var">T_App</span></span>, leaving an existential variable
    for the middle type T<sub>1</sub>, and similar for <span class="inlinecode"><span class="id" type="var">lcase</span></span>. That variable
    will then be filled in during the search for type derivations for
    <span class="inlinecode"><span class="id" type="var">e<sub>1</sub></span></span> and <span class="inlinecode"><span class="id" type="var">e<sub>2</sub></span></span>.  We also include a hint to "try harder" when
    solving equality goals; this is useful to automate uses of
    <span class="inlinecode"><span class="id" type="var">T_Var</span></span> (which includes an equality as a precondition). 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="keyword">Extern</span> 2 (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.has_type"><span class="id" type="inductive">has_type</span></a> <span class="id" type="var">_</span> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.tapp"><span class="id" type="constructor">tapp</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span>) <span class="id" type="var">_</span>) ⇒<br/>
&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.T_App"><span class="id" type="constructor">T_App</span></a>; <span class="id" type="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;You'll&nbsp;want&nbsp;to&nbsp;uncomment&nbsp;the&nbsp;following&nbsp;line&nbsp;once<br/>
&nbsp;&nbsp;&nbsp;you've&nbsp;defined&nbsp;the&nbsp;<span class="inlinecode"><span class="id" type="var">T_Lcase</span></span>&nbsp;constructor&nbsp;for&nbsp;the&nbsp;typing<br/>
&nbsp;&nbsp;&nbsp;relation:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;<br/>
Hint&nbsp;Extern&nbsp;2&nbsp;(has_type&nbsp;_&nbsp;(tlcase&nbsp;_&nbsp;_&nbsp;_&nbsp;_&nbsp;_)&nbsp;_)&nbsp;=&gt;<br/>
&nbsp;&nbsp;eapply&nbsp;T_Lcase;&nbsp;auto.<br/>
*)</span><br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="keyword">Extern</span> 2 (<span class="id" type="var">_</span> = <span class="id" type="var">_</span>) ⇒ <span class="id" type="tactic">compute</span>; <span class="id" type="tactic">reflexivity</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab620"></a><h3 class="section">Numbers</h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended.Examples.Numtest"><span class="id" type="module">Numtest</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;if<sub>0</sub>&nbsp;(pred&nbsp;(succ&nbsp;(pred&nbsp;(2&nbsp;*&nbsp;0)))&nbsp;then&nbsp;5&nbsp;else&nbsp;6&nbsp;*)</span><br/>
<span class="id" type="keyword">Definition</span> <a name="STLCExtended.Examples.Numtest.test"><span class="id" type="definition">test</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Numtest.tif0"><span class="id" type="constructor">tif0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Numtest.tpred"><span class="id" type="constructor">tpred</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Numtest.tsucc"><span class="id" type="constructor">tsucc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Numtest.tpred"><span class="id" type="constructor">tpred</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Numtest.tmult"><span class="id" type="constructor">tmult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Numtest.tnat"><span class="id" type="constructor">tnat</span></a> 2)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Numtest.tnat"><span class="id" type="constructor">tnat</span></a> 0)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Numtest.tnat"><span class="id" type="constructor">tnat</span></a> 5)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Numtest.tnat"><span class="id" type="constructor">tnat</span></a> 6).<br/>

<br/>
</div>

<div class="doc">
Remove the comment braces once you've implemented enough of the
    definitions that you think this should work. 
</div>
<div class="code code-tight">

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;typechecks&nbsp;:<br/>
&nbsp;&nbsp;(@empty&nbsp;ty)&nbsp;|-&nbsp;test&nbsp;&#x2208;&nbsp;TNat.<br/>
Proof.<br/>
&nbsp;&nbsp;unfold&nbsp;test.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;typing&nbsp;derivation&nbsp;is&nbsp;quite&nbsp;deep,&nbsp;so&nbsp;we&nbsp;need&nbsp;to&nbsp;increase&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max&nbsp;search&nbsp;depth&nbsp;of&nbsp;<span class="inlinecode"><span class="id" type="tactic">auto</span></span>&nbsp;from&nbsp;the&nbsp;default&nbsp;5&nbsp;to&nbsp;10.&nbsp;*)</span><br/>
&nbsp;&nbsp;auto&nbsp;10.<br/>
Qed.<br/>
<br/>
Example&nbsp;numtest_reduces&nbsp;:<br/>
&nbsp;&nbsp;test&nbsp;==&gt;*&nbsp;tnat&nbsp;5.<br/>
Proof.<br/>
&nbsp;&nbsp;unfold&nbsp;test.&nbsp;normalize.<br/>
Qed.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Numtest"><span class="id" type="module">Numtest</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab621"></a><h3 class="section">Products</h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended.Examples.Prodtest"><span class="id" type="module">Prodtest</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;((5,6),7).fst.snd&nbsp;*)</span><br/>
<span class="id" type="keyword">Definition</span> <a name="STLCExtended.Examples.Prodtest.test"><span class="id" type="definition">test</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Prodtest.tsnd"><span class="id" type="constructor">tsnd</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Prodtest.tfst"><span class="id" type="constructor">tfst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Prodtest.tpair"><span class="id" type="constructor">tpair</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Prodtest.tpair"><span class="id" type="constructor">tpair</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Prodtest.tnat"><span class="id" type="constructor">tnat</span></a> 5)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Prodtest.tnat"><span class="id" type="constructor">tnat</span></a> 6))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Prodtest.tnat"><span class="id" type="constructor">tnat</span></a> 7))).<br/>

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;typechecks&nbsp;:<br/>
&nbsp;&nbsp;(@empty&nbsp;ty)&nbsp;|-&nbsp;test&nbsp;&#x2208;&nbsp;TNat.<br/>
Proof.&nbsp;unfold&nbsp;test.&nbsp;eauto&nbsp;15.&nbsp;Qed.<br/>
<br/>
Example&nbsp;reduces&nbsp;:<br/>
&nbsp;&nbsp;test&nbsp;==&gt;*&nbsp;tnat&nbsp;6.<br/>
Proof.&nbsp;unfold&nbsp;test.&nbsp;normalize.&nbsp;Qed.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Prodtest"><span class="id" type="module">Prodtest</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab622"></a><h3 class="section"><span class="inlinecode"><span class="id" type="keyword">let</span></span></h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended.Examples.LetTest"><span class="id" type="module">LetTest</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;let&nbsp;x&nbsp;=&nbsp;pred&nbsp;6&nbsp;in&nbsp;succ&nbsp;x&nbsp;*)</span><br/>
<span class="id" type="keyword">Definition</span> <a name="STLCExtended.Examples.LetTest.test"><span class="id" type="definition">test</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.LetTest.tlet"><span class="id" type="constructor">tlet</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.LetTest.x"><span class="id" type="abbreviation">x</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.LetTest.tpred"><span class="id" type="constructor">tpred</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.LetTest.tnat"><span class="id" type="constructor">tnat</span></a> 6))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.LetTest.tsucc"><span class="id" type="constructor">tsucc</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.LetTest.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.LetTest.x"><span class="id" type="abbreviation">x</span></a>)).<br/>

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;typechecks&nbsp;:<br/>
&nbsp;&nbsp;(@empty&nbsp;ty)&nbsp;|-&nbsp;test&nbsp;&#x2208;&nbsp;TNat.<br/>
Proof.&nbsp;unfold&nbsp;test.&nbsp;eauto&nbsp;15.&nbsp;Qed.<br/>
<br/>
Example&nbsp;reduces&nbsp;:<br/>
&nbsp;&nbsp;test&nbsp;==&gt;*&nbsp;tnat&nbsp;6.<br/>
Proof.&nbsp;unfold&nbsp;test.&nbsp;normalize.&nbsp;Qed.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.LetTest"><span class="id" type="module">LetTest</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab623"></a><h3 class="section">Sums</h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended.Examples.Sumtest1"><span class="id" type="module">Sumtest1</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;case&nbsp;(inl&nbsp;Nat&nbsp;5)&nbsp;of<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inl&nbsp;x&nbsp;=&gt;&nbsp;x<br/>
&nbsp;&nbsp;&nbsp;|&nbsp;inr&nbsp;y&nbsp;=&gt;&nbsp;y&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="STLCExtended.Examples.Sumtest1.test"><span class="id" type="definition">test</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest1.tcase"><span class="id" type="constructor">tcase</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest1.tinl"><span class="id" type="constructor">tinl</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest1.TNat"><span class="id" type="constructor">TNat</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest1.tnat"><span class="id" type="constructor">tnat</span></a> 5))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest1.x"><span class="id" type="abbreviation">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest1.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest1.x"><span class="id" type="abbreviation">x</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest1.y"><span class="id" type="abbreviation">y</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest1.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest1.y"><span class="id" type="abbreviation">y</span></a>).<br/>

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;typechecks&nbsp;:<br/>
&nbsp;&nbsp;(@empty&nbsp;ty)&nbsp;|-&nbsp;test&nbsp;&#x2208;&nbsp;TNat.<br/>
Proof.&nbsp;unfold&nbsp;test.&nbsp;eauto&nbsp;15.&nbsp;Qed.<br/>
<br/>
Example&nbsp;reduces&nbsp;:<br/>
&nbsp;&nbsp;test&nbsp;==&gt;*&nbsp;(tnat&nbsp;5).<br/>
Proof.&nbsp;unfold&nbsp;test.&nbsp;normalize.&nbsp;Qed.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest1"><span class="id" type="module">Sumtest1</span></a>.<br/>

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended.Examples.Sumtest2"><span class="id" type="module">Sumtest2</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;let&nbsp;processSum&nbsp;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\x:Nat+Nat.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;x&nbsp;of<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inl&nbsp;n&nbsp;=&gt;&nbsp;n<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inr&nbsp;n&nbsp;=&gt;&nbsp;if<sub>0</sub>&nbsp;n&nbsp;then&nbsp;1&nbsp;else&nbsp;0&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;(processSum&nbsp;(inl&nbsp;Nat&nbsp;5),&nbsp;processSum&nbsp;(inr&nbsp;Nat&nbsp;5))&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="STLCExtended.Examples.Sumtest2.test"><span class="id" type="definition">test</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tlet"><span class="id" type="constructor">tlet</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.processSum"><span class="id" type="abbreviation">processSum</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.x"><span class="id" type="abbreviation">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.TSum"><span class="id" type="constructor">TSum</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.TNat"><span class="id" type="constructor">TNat</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.TNat"><span class="id" type="constructor">TNat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tcase"><span class="id" type="constructor">tcase</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.x"><span class="id" type="abbreviation">x</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.n"><span class="id" type="abbreviation">n</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.n"><span class="id" type="abbreviation">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.n"><span class="id" type="abbreviation">n</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tif0"><span class="id" type="constructor">tif0</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.n"><span class="id" type="abbreviation">n</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tnat"><span class="id" type="constructor">tnat</span></a> 1) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tnat"><span class="id" type="constructor">tnat</span></a> 0))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tpair"><span class="id" type="constructor">tpair</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.processSum"><span class="id" type="abbreviation">processSum</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tinl"><span class="id" type="constructor">tinl</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.TNat"><span class="id" type="constructor">TNat</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tnat"><span class="id" type="constructor">tnat</span></a> 5)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.processSum"><span class="id" type="abbreviation">processSum</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tinr"><span class="id" type="constructor">tinr</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.TNat"><span class="id" type="constructor">TNat</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2.tnat"><span class="id" type="constructor">tnat</span></a> 5)))).<br/>

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;typechecks&nbsp;:<br/>
&nbsp;&nbsp;(@empty&nbsp;ty)&nbsp;|-&nbsp;test&nbsp;&#x2208;&nbsp;(TProd&nbsp;TNat&nbsp;TNat).<br/>
Proof.&nbsp;unfold&nbsp;test.&nbsp;eauto&nbsp;15.&nbsp;Qed.<br/>
<br/>
Example&nbsp;reduces&nbsp;:<br/>
&nbsp;&nbsp;test&nbsp;==&gt;*&nbsp;(tpair&nbsp;(tnat&nbsp;5)&nbsp;(tnat&nbsp;0)).<br/>
Proof.&nbsp;unfold&nbsp;test.&nbsp;normalize.&nbsp;Qed.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.Sumtest2"><span class="id" type="module">Sumtest2</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab624"></a><h3 class="section">Lists</h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended.Examples.ListTest"><span class="id" type="module">ListTest</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;let&nbsp;l&nbsp;=&nbsp;cons&nbsp;5&nbsp;(cons&nbsp;6&nbsp;(nil&nbsp;Nat))&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;lcase&nbsp;l&nbsp;of<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nil&nbsp;=&gt;&nbsp;0<br/>
&nbsp;&nbsp;&nbsp;|&nbsp;x::y&nbsp;=&gt;&nbsp;x*x&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="STLCExtended.Examples.ListTest.test"><span class="id" type="definition">test</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tlet"><span class="id" type="constructor">tlet</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.l"><span class="id" type="abbreviation">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tcons"><span class="id" type="constructor">tcons</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tnat"><span class="id" type="constructor">tnat</span></a> 5) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tcons"><span class="id" type="constructor">tcons</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tnat"><span class="id" type="constructor">tnat</span></a> 6) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tnil"><span class="id" type="constructor">tnil</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.TNat"><span class="id" type="constructor">TNat</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tlcase"><span class="id" type="constructor">tlcase</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.l"><span class="id" type="abbreviation">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tnat"><span class="id" type="constructor">tnat</span></a> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.x"><span class="id" type="abbreviation">x</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.y"><span class="id" type="abbreviation">y</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tmult"><span class="id" type="constructor">tmult</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.x"><span class="id" type="abbreviation">x</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest.x"><span class="id" type="abbreviation">x</span></a>))).<br/>

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;typechecks&nbsp;:<br/>
&nbsp;&nbsp;(@empty&nbsp;ty)&nbsp;|-&nbsp;test&nbsp;&#x2208;&nbsp;TNat.<br/>
Proof.&nbsp;unfold&nbsp;test.&nbsp;eauto&nbsp;20.&nbsp;Qed.<br/>
<br/>
Example&nbsp;reduces&nbsp;:<br/>
&nbsp;&nbsp;test&nbsp;==&gt;*&nbsp;(tnat&nbsp;25).<br/>
Proof.&nbsp;unfold&nbsp;test.&nbsp;normalize.&nbsp;Qed.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.ListTest"><span class="id" type="module">ListTest</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab625"></a><h3 class="section"><span class="inlinecode"><span class="id" type="var">fix</span></span></h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended.Examples.FixTest1"><span class="id" type="module">FixTest1</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;fact&nbsp;:=&nbsp;fix<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\f:nat-&gt;nat.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\a:nat.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;a=0&nbsp;then&nbsp;1&nbsp;else&nbsp;a&nbsp;*&nbsp;(f&nbsp;(pred&nbsp;a)))&nbsp;*)</span><br/>
<span class="id" type="keyword">Definition</span> <a name="STLCExtended.Examples.FixTest1.fact"><span class="id" type="definition">fact</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tfix"><span class="id" type="constructor">tfix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.f"><span class="id" type="abbreviation">f</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.TArrow"><span class="id" type="constructor">TArrow</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.TNat"><span class="id" type="constructor">TNat</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.TNat"><span class="id" type="constructor">TNat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.a"><span class="id" type="abbreviation">a</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.TNat"><span class="id" type="constructor">TNat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tif0"><span class="id" type="constructor">tif0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.a"><span class="id" type="abbreviation">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tnat"><span class="id" type="constructor">tnat</span></a> 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tmult"><span class="id" type="constructor">tmult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.a"><span class="id" type="abbreviation">a</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.f"><span class="id" type="abbreviation">f</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tpred"><span class="id" type="constructor">tpred</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1.a"><span class="id" type="abbreviation">a</span></a>))))))).<br/>

<br/>
</div>

<div class="doc">
(Warning: you may be able to typecheck <span class="inlinecode"><span class="id" type="var">fact</span></span> but still have some
    rules wrong!) 
</div>
<div class="code code-tight">

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;fact_typechecks&nbsp;:<br/>
&nbsp;&nbsp;(@empty&nbsp;ty)&nbsp;|-&nbsp;fact&nbsp;&#x2208;&nbsp;(TArrow&nbsp;TNat&nbsp;TNat).<br/>
Proof.&nbsp;unfold&nbsp;fact.&nbsp;auto&nbsp;10.<br/>
Qed.<br/>
*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;fact_example:<br/>
&nbsp;&nbsp;(tapp&nbsp;fact&nbsp;(tnat&nbsp;4))&nbsp;==&gt;*&nbsp;(tnat&nbsp;24).<br/>
Proof.&nbsp;unfold&nbsp;fact.&nbsp;normalize.&nbsp;Qed.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest1"><span class="id" type="module">FixTest1</span></a>.<br/>

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended.Examples.FixTest2"><span class="id" type="module">FixTest2</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;map&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\g:nat-&gt;nat.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fix<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\f:<span class="inlinecode"><span class="id" type="var">nat</span></span>-&gt;<span class="inlinecode"><span class="id" type="var">nat</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\l:<span class="inlinecode"><span class="id" type="var">nat</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;l&nbsp;of<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<span class="inlinecode"></span>&nbsp;-&gt;&nbsp;<span class="inlinecode"></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;x::l&nbsp;-&gt;&nbsp;(g&nbsp;x)::(f&nbsp;l))&nbsp;*)</span><br/>
<span class="id" type="keyword">Definition</span> <a name="STLCExtended.Examples.FixTest2.map"><span class="id" type="definition">map</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.g"><span class="id" type="abbreviation">g</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.TArrow"><span class="id" type="constructor">TArrow</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.TNat"><span class="id" type="constructor">TNat</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.TNat"><span class="id" type="constructor">TNat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tfix"><span class="id" type="constructor">tfix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.f"><span class="id" type="abbreviation">f</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.TArrow"><span class="id" type="constructor">TArrow</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.TList"><span class="id" type="constructor">TList</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.TNat"><span class="id" type="constructor">TNat</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.TList"><span class="id" type="constructor">TList</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.TNat"><span class="id" type="constructor">TNat</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.l"><span class="id" type="abbreviation">l</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.TList"><span class="id" type="constructor">TList</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.TNat"><span class="id" type="constructor">TNat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tlcase"><span class="id" type="constructor">tlcase</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.l"><span class="id" type="abbreviation">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tnil"><span class="id" type="constructor">tnil</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.TNat"><span class="id" type="constructor">TNat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.a"><span class="id" type="abbreviation">a</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.l"><span class="id" type="abbreviation">l</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tcons"><span class="id" type="constructor">tcons</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.g"><span class="id" type="abbreviation">g</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.a"><span class="id" type="abbreviation">a</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.f"><span class="id" type="abbreviation">f</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2.l"><span class="id" type="abbreviation">l</span></a>))))))).<br/>

<br/>
<span class="comment">(*&nbsp;<br/>
<span class="comment">(*&nbsp;Make&nbsp;sure&nbsp;you've&nbsp;uncommented&nbsp;the&nbsp;last&nbsp;<span class="inlinecode"><span class="id" type="keyword">Hint</span></span> <span class="inlinecode"><span class="id" type="keyword">Extern</span></span>&nbsp;above...&nbsp;*)</span><br/>
Example&nbsp;map_typechecks&nbsp;:<br/>
&nbsp;&nbsp;empty&nbsp;|-&nbsp;map&nbsp;&#x2208;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(TArrow&nbsp;(TArrow&nbsp;TNat&nbsp;TNat)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(TArrow&nbsp;(TList&nbsp;TNat)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(TList&nbsp;TNat))).<br/>
Proof.&nbsp;unfold&nbsp;map.&nbsp;auto&nbsp;10.&nbsp;Qed.<br/>
<br/>
Example&nbsp;map_example&nbsp;:<br/>
&nbsp;&nbsp;tapp&nbsp;(tapp&nbsp;map&nbsp;(tabs&nbsp;a&nbsp;TNat&nbsp;(tsucc&nbsp;(tvar&nbsp;a))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(tcons&nbsp;(tnat&nbsp;1)&nbsp;(tcons&nbsp;(tnat&nbsp;2)&nbsp;(tnil&nbsp;TNat)))<br/>
&nbsp;&nbsp;==&gt;*&nbsp;(tcons&nbsp;(tnat&nbsp;2)&nbsp;(tcons&nbsp;(tnat&nbsp;3)&nbsp;(tnil&nbsp;TNat))).<br/>
Proof.&nbsp;unfold&nbsp;map.&nbsp;normalize.&nbsp;Qed.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest2"><span class="id" type="module">FixTest2</span></a>.<br/>

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended.Examples.FixTest3"><span class="id" type="module">FixTest3</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;equal&nbsp;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fix<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\eq:Nat-&gt;Nat-&gt;Bool.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\m:Nat.&nbsp;\n:Nat.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if<sub>0</sub>&nbsp;m&nbsp;then&nbsp;(if<sub>0</sub>&nbsp;n&nbsp;then&nbsp;1&nbsp;else&nbsp;0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if<sub>0</sub>&nbsp;n&nbsp;then&nbsp;0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;eq&nbsp;(pred&nbsp;m)&nbsp;(pred&nbsp;n))&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="STLCExtended.Examples.FixTest3.equal"><span class="id" type="definition">equal</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tfix"><span class="id" type="constructor">tfix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.eq"><span class="id" type="abbreviation">eq</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.TArrow"><span class="id" type="constructor">TArrow</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.TNat"><span class="id" type="constructor">TNat</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.TArrow"><span class="id" type="constructor">TArrow</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.TNat"><span class="id" type="constructor">TNat</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.TNat"><span class="id" type="constructor">TNat</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.m"><span class="id" type="abbreviation">m</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.TNat"><span class="id" type="constructor">TNat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.n"><span class="id" type="abbreviation">n</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.TNat"><span class="id" type="constructor">TNat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tif0"><span class="id" type="constructor">tif0</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.m"><span class="id" type="abbreviation">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tif0"><span class="id" type="constructor">tif0</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.n"><span class="id" type="abbreviation">n</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tnat"><span class="id" type="constructor">tnat</span></a> 1) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tnat"><span class="id" type="constructor">tnat</span></a> 0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tif0"><span class="id" type="constructor">tif0</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.n"><span class="id" type="abbreviation">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tnat"><span class="id" type="constructor">tnat</span></a> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.eq"><span class="id" type="abbreviation">eq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tpred"><span class="id" type="constructor">tpred</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.m"><span class="id" type="abbreviation">m</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tpred"><span class="id" type="constructor">tpred</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3.n"><span class="id" type="abbreviation">n</span></a>)))))))).<br/>

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;equal_typechecks&nbsp;:<br/>
&nbsp;&nbsp;(@empty&nbsp;ty)&nbsp;|-&nbsp;equal&nbsp;&#x2208;&nbsp;(TArrow&nbsp;TNat&nbsp;(TArrow&nbsp;TNat&nbsp;TNat)).<br/>
Proof.&nbsp;unfold&nbsp;equal.&nbsp;auto&nbsp;10.<br/>
Qed.<br/>
*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;equal_example1:<br/>
&nbsp;&nbsp;(tapp&nbsp;(tapp&nbsp;equal&nbsp;(tnat&nbsp;4))&nbsp;(tnat&nbsp;4))&nbsp;==&gt;*&nbsp;(tnat&nbsp;1).<br/>
Proof.&nbsp;unfold&nbsp;equal.&nbsp;normalize.&nbsp;Qed.<br/>
*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;equal_example2:<br/>
&nbsp;&nbsp;(tapp&nbsp;(tapp&nbsp;equal&nbsp;(tnat&nbsp;4))&nbsp;(tnat&nbsp;5))&nbsp;==&gt;*&nbsp;(tnat&nbsp;0).<br/>
Proof.&nbsp;unfold&nbsp;equal.&nbsp;normalize.&nbsp;Qed.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest3"><span class="id" type="module">FixTest3</span></a>.<br/>

<br/>
<span class="id" type="keyword">Module</span> <a name="STLCExtended.Examples.FixTest4"><span class="id" type="module">FixTest4</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;let&nbsp;evenodd&nbsp;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fix<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\eo:&nbsp;(Nat-&gt;Nat&nbsp;*&nbsp;Nat-&gt;Nat).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;e&nbsp;=&nbsp;\n:Nat.&nbsp;if<sub>0</sub>&nbsp;n&nbsp;then&nbsp;1&nbsp;else&nbsp;eo.snd&nbsp;(pred&nbsp;n)&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;o&nbsp;=&nbsp;\n:Nat.&nbsp;if<sub>0</sub>&nbsp;n&nbsp;then&nbsp;0&nbsp;else&nbsp;eo.fst&nbsp;(pred&nbsp;n)&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e,o))&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;even&nbsp;=&nbsp;evenodd.fst&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;odd&nbsp;&nbsp;=&nbsp;evenodd.snd&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(even&nbsp;3,&nbsp;even&nbsp;4)<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="STLCExtended.Examples.FixTest4.eotest"><span class="id" type="definition">eotest</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tlet"><span class="id" type="constructor">tlet</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.evenodd"><span class="id" type="abbreviation">evenodd</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tfix"><span class="id" type="constructor">tfix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.eo"><span class="id" type="abbreviation">eo</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.TProd"><span class="id" type="constructor">TProd</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.TArrow"><span class="id" type="constructor">TArrow</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.TNat"><span class="id" type="constructor">TNat</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.TNat"><span class="id" type="constructor">TNat</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.TArrow"><span class="id" type="constructor">TArrow</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.TNat"><span class="id" type="constructor">TNat</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.TNat"><span class="id" type="constructor">TNat</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tpair"><span class="id" type="constructor">tpair</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.n"><span class="id" type="abbreviation">n</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.TNat"><span class="id" type="constructor">TNat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tif0"><span class="id" type="constructor">tif0</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.n"><span class="id" type="abbreviation">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tnat"><span class="id" type="constructor">tnat</span></a> 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tsnd"><span class="id" type="constructor">tsnd</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.eo"><span class="id" type="abbreviation">eo</span></a>)) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tpred"><span class="id" type="constructor">tpred</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.n"><span class="id" type="abbreviation">n</span></a>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.n"><span class="id" type="abbreviation">n</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.TNat"><span class="id" type="constructor">TNat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tif0"><span class="id" type="constructor">tif0</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.n"><span class="id" type="abbreviation">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tnat"><span class="id" type="constructor">tnat</span></a> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tfst"><span class="id" type="constructor">tfst</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.eo"><span class="id" type="abbreviation">eo</span></a>)) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tpred"><span class="id" type="constructor">tpred</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.n"><span class="id" type="abbreviation">n</span></a>))))))))<br/>
&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tlet"><span class="id" type="constructor">tlet</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.even"><span class="id" type="abbreviation">even</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tfst"><span class="id" type="constructor">tfst</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.evenodd"><span class="id" type="abbreviation">evenodd</span></a>))<br/>
&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tlet"><span class="id" type="constructor">tlet</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.odd"><span class="id" type="abbreviation">odd</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tsnd"><span class="id" type="constructor">tsnd</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.evenodd"><span class="id" type="abbreviation">evenodd</span></a>))<br/>
&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tpair"><span class="id" type="constructor">tpair</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.even"><span class="id" type="abbreviation">even</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tnat"><span class="id" type="constructor">tnat</span></a> 3))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tapp"><span class="id" type="constructor">tapp</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.even"><span class="id" type="abbreviation">even</span></a>) (<a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4.tnat"><span class="id" type="constructor">tnat</span></a> 4))))).<br/>

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;eotest_typechecks&nbsp;:<br/>
&nbsp;&nbsp;(@empty&nbsp;ty)&nbsp;|-&nbsp;eotest&nbsp;&#x2208;&nbsp;(TProd&nbsp;TNat&nbsp;TNat).<br/>
Proof.&nbsp;unfold&nbsp;eotest.&nbsp;eauto&nbsp;30.<br/>
Qed.<br/>
*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<br/>
Example&nbsp;eotest_example1:<br/>
&nbsp;&nbsp;eotest&nbsp;==&gt;*&nbsp;(tpair&nbsp;(tnat&nbsp;0)&nbsp;(tnat&nbsp;1)).<br/>
Proof.&nbsp;unfold&nbsp;eotest.&nbsp;normalize.&nbsp;Qed.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples.FixTest4"><span class="id" type="module">FixTest4</span></a>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended.Examples"><span class="id" type="module">Examples</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab626"></a><h2 class="section">Properties of Typing</h2>

<div class="paragraph"> </div>

 The proofs of progress and preservation for this enriched system
    are essentially the same (though of course longer) as for the pure
    STLC. 
</div>
<div class="code code-tight">

<br/>
</div>

<div class="doc">
<a name="lab627"></a><h3 class="section">Progress</h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="STLCExtended.progress"><span class="id" type="lemma">progress</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t</span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Maps.html#empty"><span class="id" type="definition">empty</span></a> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> &#x2208; <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.value"><span class="id" type="inductive">value</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span style="font-family: arial;">&or;</span> <span style="font-family: arial;">&exist;</span><span class="id" type="var">t'</span>, <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t'"><span class="id" type="variable">t'</span></a>.<br/>
<div class="togglescript" id="proofcontrol1" onclick="toggleDisplay('proof1');toggleDisplay('proofcontrol1')"><span class="show"></span></div>
<div class="proofscript" id="proof1" onclick="toggleDisplay('proof1');toggleDisplay('proofcontrol1')">
<span class="id" type="keyword">Proof</span> <span class="id" type="keyword">with</span> <span class="id" type="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Theorem:&nbsp;Suppose&nbsp;empty&nbsp;|-&nbsp;t&nbsp;:&nbsp;T.&nbsp;&nbsp;Then&nbsp;either<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;t&nbsp;is&nbsp;a&nbsp;value,&nbsp;or<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;t&nbsp;==&gt;&nbsp;t'&nbsp;for&nbsp;some&nbsp;t'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Proof:&nbsp;By&nbsp;induction&nbsp;on&nbsp;the&nbsp;given&nbsp;typing&nbsp;derivation.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">t</span> <span class="id" type="var">T</span> <span class="id" type="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (@<a class="idref" href="Maps.html#empty"><span class="id" type="definition">empty</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.ty"><span class="id" type="inductive">ty</span></a>) <span class="id" type="keyword">as</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">HeqGamma</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">Ht</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">HeqGamma</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Var&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;final&nbsp;rule&nbsp;in&nbsp;the&nbsp;given&nbsp;typing&nbsp;derivation&nbsp;cannot&nbsp;be&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">T_Var</span></span>,&nbsp;since&nbsp;it&nbsp;can&nbsp;never&nbsp;be&nbsp;the&nbsp;case&nbsp;that&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">empty</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T</span></span>&nbsp;(since&nbsp;the&nbsp;context&nbsp;is&nbsp;empty).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Abs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;the&nbsp;<span class="inlinecode"><span class="id" type="var">T_Abs</span></span>&nbsp;rule&nbsp;was&nbsp;the&nbsp;last&nbsp;used,&nbsp;then&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">tabs</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">T<sub>11</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>12</sub></span></span>,&nbsp;which&nbsp;is&nbsp;a&nbsp;value.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">left</span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_App&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;the&nbsp;last&nbsp;rule&nbsp;applied&nbsp;was&nbsp;T_App,&nbsp;then&nbsp;<span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span>,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;we&nbsp;know&nbsp;from&nbsp;the&nbsp;form&nbsp;of&nbsp;the&nbsp;rule&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">empty</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span></span> <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> <span class="inlinecode"><span class="id" type="var">T<sub>2</sub></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">empty</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;the&nbsp;induction&nbsp;hypothesis,&nbsp;each&nbsp;of&nbsp;t<sub>1</sub>&nbsp;and&nbsp;t<sub>2</sub>&nbsp;either&nbsp;is&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;value&nbsp;or&nbsp;can&nbsp;take&nbsp;a&nbsp;step.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt1</span>; <span class="id" type="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt2</span>; <span class="id" type="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;t<sub>2</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;both&nbsp;<span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span>&nbsp;are&nbsp;values,&nbsp;then&nbsp;we&nbsp;know&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">tabs</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">T<sub>11</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>12</sub></span></span>,&nbsp;since&nbsp;abstractions&nbsp;are&nbsp;the&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;only&nbsp;values&nbsp;that&nbsp;can&nbsp;have&nbsp;an&nbsp;arrow&nbsp;type.&nbsp;&nbsp;But<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">(<span class="id" type="var">tabs</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">T<sub>11</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>12</sub></span>)</span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span> <span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode">[<span class="id" type="var">x</span>:=<span class="id" type="var">t<sub>2</sub></span>]<span class="id" type="var">t<sub>12</sub></span></span>&nbsp;by&nbsp;<span class="inlinecode"><span class="id" type="var">ST_AppAbs</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve_by_invert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">x</span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>12</sub></span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;t<sub>2</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;<span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span>&nbsp;is&nbsp;a&nbsp;value&nbsp;and&nbsp;<span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span> <span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub>'</span></span>,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;<span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span> <span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub>'</span></span>&nbsp;by&nbsp;<span class="inlinecode"><span class="id" type="var">ST_App2</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H<sub>0</sub></span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>2</sub>'</span> <span class="id" type="var">Hstp</span>]. <span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub>'</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Finally,&nbsp;If&nbsp;<span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>1</sub>'</span></span>,&nbsp;then&nbsp;<span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span> <span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>1</sub>'</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span>&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;<span class="inlinecode"><span class="id" type="var">ST_App1</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">Hstp</span>]. <span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Nat&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">left</span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Succ&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve_by_invert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n<sub>1</sub></span>))...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tsucc"><span class="id" type="constructor">tsucc</span></a> <span class="id" type="var">t<sub>1</sub>'</span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Pred&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve_by_invert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Peano.html#pred"><span class="id" type="abbreviation">pred</span></a> <span class="id" type="var">n<sub>1</sub></span>))...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tpred"><span class="id" type="constructor">tpred</span></a> <span class="id" type="var">t<sub>1</sub>'</span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Mult&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt2</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;t<sub>2</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve_by_invert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H<sub>0</sub></span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve_by_invert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tnat"><span class="id" type="constructor">tnat</span></a> (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Peano.html#mult"><span class="id" type="abbreviation">mult</span></a> <span class="id" type="var">n<sub>1</sub></span> <span class="id" type="var">n<sub>0</sub></span>))...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;t<sub>2</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H<sub>0</sub></span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>2</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub>'</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_If<sub>0</sub>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve_by_invert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">n<sub>1</sub></span> <span class="id" type="keyword">as</span> [|<span class="id" type="var">n<sub>1</sub>'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;n<sub>1</sub>=0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span><span class="id" type="var">t<sub>2</sub></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;n<sub>1</sub>&lt;&gt;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span><span class="id" type="var">t<sub>3</sub></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">H<sub>0</sub></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Pair&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt2</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;t<sub>2</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H<sub>0</sub></span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>2</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub>'</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Fst&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve_by_invert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span><span class="id" type="var">v<sub>1</sub></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tfst"><span class="id" type="constructor">tfst</span></a> <span class="id" type="var">t<sub>1</sub>'</span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Snd&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve_by_invert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span><span class="id" type="var">v<sub>2</sub></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tsnd"><span class="id" type="constructor">tsnd</span></a> <span class="id" type="var">t<sub>1</sub>'</span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Unit&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">left</span>...<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;let&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Inl&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">Hstp</span>]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;exists&nbsp;(tinl&nbsp;_&nbsp;t<sub>1</sub>')...&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Inr&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">Hstp</span>]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;exists&nbsp;(tinr&nbsp;_&nbsp;t<sub>1</sub>')...&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>0</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve_by_invert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;t<sub>0</sub>&nbsp;is&nbsp;inl&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>([<span class="id" type="var">x<sub>1</sub></span>:=<span class="id" type="var">v</span>]<span class="id" type="var">t<sub>1</sub></span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;t<sub>0</sub>&nbsp;is&nbsp;inr&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>([<span class="id" type="var">x<sub>2</sub></span>:=<span class="id" type="var">v</span>]<span class="id" type="var">t<sub>2</sub></span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>0</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>0</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> <span class="id" type="var">t<sub>0</sub>'</span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub></span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Nil&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">left</span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Cons&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;head&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt2</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;tail&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H<sub>0</sub></span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>2</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub>'</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;head&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Lcase&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHt1</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;is&nbsp;a&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">solve_by_invert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;t<sub>1</sub>=tnil&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span><span class="id" type="var">t<sub>2</sub></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;t<sub>1</sub>=tcons&nbsp;v<sub>1</sub>&nbsp;vl&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>([<span class="id" type="var">x<sub>2</sub></span>:=<span class="id" type="var">vl</span>]([<span class="id" type="var">x<sub>1</sub></span>:=<span class="id" type="var">v<sub>1</sub></span>]<span class="id" type="var">t<sub>3</sub></span>))...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;t<sub>1</sub>&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span>(<a class="idref" href="MoreStlc.html#STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> <span class="id" type="var">t<sub>1</sub>'</span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>)...<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;fix&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
<span class="id" type="keyword">Qed</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab628"></a><h3 class="section">Context Invariance</h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="STLCExtended.appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> : <a class="idref" href="Maps.html#id"><span class="id" type="inductive">id</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#STLCExtended.tm"><span class="id" type="inductive">tm</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_var"><span class="id" type="constructor">afi_var</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tvar"><span class="id" type="constructor">tvar</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_app1"><span class="id" type="constructor">afi_app1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_app2"><span class="id" type="constructor">afi_app2</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tapp"><span class="id" type="constructor">tapp</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_abs"><span class="id" type="constructor">afi_abs</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">T<sub>11</sub></span> <span class="id" type="var">t<sub>12</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#y"><span class="id" type="variable">y</span></a> ≠ <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a>  <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>12</sub>"><span class="id" type="variable">t<sub>12</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tabs"><span class="id" type="constructor">tabs</span></a> <a class="idref" href="MoreStlc.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="MoreStlc.html#T<sub>11</sub>"><span class="id" type="variable">T<sub>11</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>12</sub>"><span class="id" type="variable">t<sub>12</sub></span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;nats&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_succ"><span class="id" type="constructor">afi_succ</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tsucc"><span class="id" type="constructor">tsucc</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_pred"><span class="id" type="constructor">afi_pred</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tpred"><span class="id" type="constructor">tpred</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_mult1"><span class="id" type="constructor">afi_mult1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_mult2"><span class="id" type="constructor">afi_mult2</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tmult"><span class="id" type="constructor">tmult</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_if<sub>01</sub>"><span class="id" type="constructor">afi_if<sub>01</sub></span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_if<sub>02</sub>"><span class="id" type="constructor">afi_if<sub>02</sub></span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_if<sub>03</sub>"><span class="id" type="constructor">afi_if<sub>03</sub></span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tif0"><span class="id" type="constructor">tif0</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;pairs&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_pair1"><span class="id" type="constructor">afi_pair1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_pair2"><span class="id" type="constructor">afi_pair2</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tpair"><span class="id" type="constructor">tpair</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_fst"><span class="id" type="constructor">afi_fst</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tfst"><span class="id" type="constructor">tfst</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_snd"><span class="id" type="constructor">afi_snd</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tsnd"><span class="id" type="constructor">tsnd</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;let&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;sums&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_inl"><span class="id" type="constructor">afi_inl</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t</span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tinl"><span class="id" type="constructor">tinl</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_inr"><span class="id" type="constructor">afi_inr</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t</span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tinr"><span class="id" type="constructor">tinr</span></a> <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_case0"><span class="id" type="constructor">afi_case0</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>0</sub></span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>0</sub>"><span class="id" type="variable">t<sub>0</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>0</sub>"><span class="id" type="variable">t<sub>0</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_case1"><span class="id" type="constructor">afi_case1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>0</sub></span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> ≠ <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>0</sub>"><span class="id" type="variable">t<sub>0</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_case2"><span class="id" type="constructor">afi_case2</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>0</sub></span> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> ≠ <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tcase"><span class="id" type="constructor">tcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>0</sub>"><span class="id" type="variable">t<sub>0</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>1</sub>"><span class="id" type="variable">x<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#x<sub>2</sub>"><span class="id" type="variable">x<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;lists&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_cons1"><span class="id" type="constructor">afi_cons1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_cons2"><span class="id" type="constructor">afi_cons2</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tcons"><span class="id" type="constructor">tcons</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_lcase1"><span class="id" type="constructor">afi_lcase1</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">y<sub>1</sub></span> <span class="id" type="var">y<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#y<sub>1</sub>"><span class="id" type="variable">y<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#y<sub>2</sub>"><span class="id" type="variable">y<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_lcase2"><span class="id" type="constructor">afi_lcase2</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">y<sub>1</sub></span> <span class="id" type="var">y<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#y<sub>1</sub>"><span class="id" type="variable">y<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#y<sub>2</sub>"><span class="id" type="variable">y<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>)<br/>
&nbsp;&nbsp;| <a name="STLCExtended.afi_lcase3"><span class="id" type="constructor">afi_lcase3</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span> <span class="id" type="var">y<sub>1</sub></span> <span class="id" type="var">y<sub>2</sub></span> <span class="id" type="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#y<sub>1</sub>"><span class="id" type="variable">y<sub>1</sub></span></a> ≠ <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#y<sub>2</sub>"><span class="id" type="variable">y<sub>2</sub></span></a> ≠ <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="MoreStlc.html#STLCExtended.tlcase"><span class="id" type="constructor">tlcase</span></a> <a class="idref" href="MoreStlc.html#t<sub>1</sub>"><span class="id" type="variable">t<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>2</sub>"><span class="id" type="variable">t<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#y<sub>1</sub>"><span class="id" type="variable">y<sub>1</sub></span></a> <a class="idref" href="MoreStlc.html#y<sub>2</sub>"><span class="id" type="variable">y<sub>2</sub></span></a> <a class="idref" href="MoreStlc.html#t<sub>3</sub>"><span class="id" type="variable">t<sub>3</sub></span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;fix&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
.<br/>

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="var">Constructors</span> <a class="idref" href="MoreStlc.html#appears_free_in"><span class="id" type="inductive">appears_free_in</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="STLCExtended.context_invariance"><span class="id" type="lemma">context_invariance</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: serif; font-size:85%;">&Gamma;'</span> <span class="id" type="var">t</span> <span class="id" type="var">S</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> &#x2208; <a class="idref" href="MoreStlc.html#S"><span class="id" type="variable">S</span></a>  <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span>, <a class="idref" href="MoreStlc.html#STLCExtended.appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span style="font-family: arial;">&rarr;</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> = <span style="font-family: serif; font-size:85%;">&Gamma;'</span> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a>)  <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;'</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> &#x2208; <a class="idref" href="MoreStlc.html#S"><span class="id" type="variable">S</span></a>.<br/>
<div class="togglescript" id="proofcontrol2" onclick="toggleDisplay('proof2');toggleDisplay('proofcontrol2')"><span class="show"></span></div>
<div class="proofscript" id="proof2" onclick="toggleDisplay('proof2');toggleDisplay('proofcontrol2')">
<span class="id" type="keyword">Proof</span> <span class="id" type="keyword">with</span> <span class="id" type="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span style="font-family: serif; font-size:85%;">&Gamma;'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span style="font-family: serif; font-size:85%;">&Gamma;'</span> <span class="id" type="var">Heqv</span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Var&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_Var"><span class="id" type="constructor">T_Var</span></a>... <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <span class="id" type="var">Heqv</span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Abs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_Abs"><span class="id" type="constructor">T_Abs</span></a>... <span class="id" type="tactic">apply</span> <span class="id" type="var">IHhas_type</span>. <span class="id" type="tactic">intros</span> <span class="id" type="var">y</span> <span class="id" type="var">Hafi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Mult&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_Mult"><span class="id" type="constructor">T_Mult</span></a>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_If<sub>0</sub>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_If<sub>0</sub>"><span class="id" type="constructor">T_If<sub>0</sub></span></a>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Pair&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_Pair"><span class="id" type="constructor">T_Pair</span></a>...<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;let&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_Case"><span class="id" type="constructor">T_Case</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <span class="id" type="var">IHhas_type2</span>. <span class="id" type="tactic">intros</span> <span class="id" type="var">y</span> <span class="id" type="var">Hafi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">y</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <span class="id" type="var">IHhas_type3</span>. <span class="id" type="tactic">intros</span> <span class="id" type="var">y</span> <span class="id" type="var">Hafi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">y</span>)...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Cons&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_Cons"><span class="id" type="constructor">T_Cons</span></a>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Lcase&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_Lcase"><span class="id" type="constructor">T_Lcase</span></a>... <span class="id" type="tactic">apply</span> <span class="id" type="var">IHhas_type3</span>. <span class="id" type="tactic">intros</span> <span class="id" type="var">y</span> <span class="id" type="var">Hafi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">y</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">y</span>)...<br/>
<span class="id" type="keyword">Qed</span>.<br/>
</div>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="STLCExtended.free_in_context"><span class="id" type="lemma">free_in_context</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">x</span> <span class="id" type="var">t</span> <span class="id" type="var">T</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span>,<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#STLCExtended.appears_free_in"><span class="id" type="inductive">appears_free_in</span></a> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> &#x2208; <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;<span style="font-family: arial;">&exist;</span><span class="id" type="var">T'</span>, <span style="font-family: serif; font-size:85%;">&Gamma;</span> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> = <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a> <a class="idref" href="MoreStlc.html#T'"><span class="id" type="variable">T'</span></a>.<br/>
<div class="togglescript" id="proofcontrol3" onclick="toggleDisplay('proof3');toggleDisplay('proofcontrol3')"><span class="show"></span></div>
<div class="proofscript" id="proof3" onclick="toggleDisplay('proof3');toggleDisplay('proofcontrol3')">
<span class="id" type="keyword">Proof</span> <span class="id" type="keyword">with</span> <span class="id" type="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span> <span class="id" type="var">t</span> <span class="id" type="var">T</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">Hafi</span> <span class="id" type="var">Htyp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">Htyp</span>; <span class="id" type="tactic">inversion</span> <span class="id" type="var">Hafi</span>; <span class="id" type="tactic">subst</span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Abs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHtyp</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">T'</span> <span class="id" type="var">Hctx</span>]... <span style="font-family: arial;">&exist;</span><span class="id" type="var">T'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Hctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Maps.html#false_beq_id"><span class="id" type="lemma">false_beq_id</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Hctx</span>...<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;let&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;T_Case&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;left&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHtyp2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">T'</span> <span class="id" type="var">Hctx</span>]... <span style="font-family: arial;">&exist;</span><span class="id" type="var">T'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Hctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Maps.html#false_beq_id"><span class="id" type="lemma">false_beq_id</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Hctx</span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;right&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHtyp3</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">T'</span> <span class="id" type="var">Hctx</span>]... <span style="font-family: arial;">&exist;</span><span class="id" type="var">T'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Hctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Maps.html#false_beq_id"><span class="id" type="lemma">false_beq_id</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Hctx</span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Lcase&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">Htyp1</span> <span class="id" type="var">IHHtyp1</span> <span class="id" type="var">Htyp2</span> <span class="id" type="var">IHHtyp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHHtyp3</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">T'</span> <span class="id" type="var">Hctx</span>]... <span style="font-family: arial;">&exist;</span><span class="id" type="var">T'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Hctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Maps.html#false_beq_id"><span class="id" type="lemma">false_beq_id</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Hctx</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Maps.html#false_beq_id"><span class="id" type="lemma">false_beq_id</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Hctx</span>...<br/>
<span class="id" type="keyword">Qed</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab629"></a><h3 class="section">Substitution</h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="STLCExtended.substitution_preserves_typing"><span class="id" type="lemma">substitution_preserves_typing</span></a> : <span style="font-family: arial;">&forall;</span><span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">x</span> <span class="id" type="var">U</span> <span class="id" type="var">v</span> <span class="id" type="var">t</span> <span class="id" type="var">S</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="MoreStlc.html#U"><span class="id" type="variable">U</span></a>) <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> &#x2208; <a class="idref" href="MoreStlc.html#S"><span class="id" type="variable">S</span></a>  <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Maps.html#empty"><span class="id" type="definition">empty</span></a> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#v"><span class="id" type="variable">v</span></a> &#x2208; <a class="idref" href="MoreStlc.html#U"><span class="id" type="variable">U</span></a>   <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: serif; font-size:85%;">&Gamma;</span> <span style="font-family: arial;">&#8866;</span> ([<a class="idref" href="MoreStlc.html#x"><span class="id" type="variable">x</span></a>:=<a class="idref" href="MoreStlc.html#v"><span class="id" type="variable">v</span></a>]<a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a>) &#x2208; <a class="idref" href="MoreStlc.html#S"><span class="id" type="variable">S</span></a>.<br/>
<div class="togglescript" id="proofcontrol4" onclick="toggleDisplay('proof4');toggleDisplay('proofcontrol4')"><span class="show"></span></div>
<div class="proofscript" id="proof4" onclick="toggleDisplay('proof4');toggleDisplay('proofcontrol4')">
<span class="id" type="keyword">Proof</span> <span class="id" type="keyword">with</span> <span class="id" type="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Theorem:&nbsp;If&nbsp;Gamma,x:U&nbsp;|-&nbsp;t&nbsp;:&nbsp;S&nbsp;and&nbsp;empty&nbsp;|-&nbsp;v&nbsp;:&nbsp;U,&nbsp;then<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gamma&nbsp;|-&nbsp;<span class="inlinecode"><span class="id" type="var">x</span>:=<span class="id" type="var">v</span></span>t&nbsp;:&nbsp;S.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">x</span> <span class="id" type="var">U</span> <span class="id" type="var">v</span> <span class="id" type="var">t</span> <span class="id" type="var">S</span> <span class="id" type="var">Htypt</span> <span class="id" type="var">Htypv</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span>. <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">S</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Proof:&nbsp;By&nbsp;induction&nbsp;on&nbsp;the&nbsp;term&nbsp;t.&nbsp;&nbsp;Most&nbsp;cases&nbsp;follow&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directly&nbsp;from&nbsp;the&nbsp;IH,&nbsp;with&nbsp;the&nbsp;exception&nbsp;of&nbsp;tvar<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;tabs.&nbsp;These&nbsp;aren't&nbsp;automatic&nbsp;because&nbsp;we&nbsp;must<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason&nbsp;about&nbsp;how&nbsp;the&nbsp;variables&nbsp;interact.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">t</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">S</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span> <span class="id" type="var">Htypt</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">inversion</span> <span class="id" type="var">Htypt</span>; <span class="id" type="tactic">subst</span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;tvar&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">i</span> <span class="id" type="var">into</span> <span class="id" type="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;t&nbsp;=&nbsp;y,&nbsp;we&nbsp;know&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">empty</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">v</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">U</span></span>&nbsp;and<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span>,<span class="id" type="var">x</span>:<span class="id" type="var">U</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">S</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and,&nbsp;by&nbsp;inversion,&nbsp;<span class="inlinecode"><span class="id" type="var">update</span></span> <span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">U</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">Some</span></span> <span class="inlinecode"><span class="id" type="var">S</span></span>.&nbsp;&nbsp;We&nbsp;want&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show&nbsp;that&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode">[<span class="id" type="var">x</span>:=<span class="id" type="var">v</span>]<span class="id" type="var">y</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">S</span></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;There&nbsp;are&nbsp;two&nbsp;cases&nbsp;to&nbsp;consider:&nbsp;either&nbsp;<span class="inlinecode"><span class="id" type="var">x</span>=<span class="id" type="var">y</span></span>&nbsp;or&nbsp;<span class="inlinecode"><span class="id" type="var">x</span>≠<span class="id" type="var">y</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H<sub>1</sub></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x=y&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;<span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">y</span></span>,&nbsp;then&nbsp;we&nbsp;know&nbsp;that&nbsp;<span class="inlinecode"><span class="id" type="var">U</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">S</span></span>,&nbsp;and&nbsp;that&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">[<span class="id" type="var">x</span>:=<span class="id" type="var">v</span>]<span class="id" type="var">y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">v</span></span>.&nbsp;&nbsp;So&nbsp;what&nbsp;we&nbsp;really&nbsp;must&nbsp;show&nbsp;is&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;if&nbsp;<span class="inlinecode"><span class="id" type="var">empty</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">v</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">U</span></span>&nbsp;then&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">v</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">U</span></span>.&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;already&nbsp;proven&nbsp;a&nbsp;more&nbsp;general&nbsp;version<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;this&nbsp;theorem,&nbsp;called&nbsp;context&nbsp;invariance.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H<sub>1</sub></span>; <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H<sub>1</sub></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span> <span class="id" type="var">Hcontra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="MoreStlc.html#STLCExtended.free_in_context"><span class="id" type="lemma">free_in_context</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">S</span> <a class="idref" href="Maps.html#empty"><span class="id" type="definition">empty</span></a> <span class="id" type="var">Hcontra</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">as</span> [<span class="id" type="var">T'</span> <span class="id" type="var">HT'</span>]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">HT'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x&lt;&gt;y&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;<span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">≠</span> <span class="inlinecode"><span class="id" type="var">y</span></span>,&nbsp;then&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">Some</span></span> <span class="inlinecode"><span class="id" type="var">S</span></span>&nbsp;and&nbsp;the&nbsp;substitution&nbsp;has&nbsp;no<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;effect.&nbsp;&nbsp;We&nbsp;can&nbsp;show&nbsp;that&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">S</span></span>&nbsp;by&nbsp;<span class="inlinecode"><span class="id" type="var">T_Var</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_Var"><span class="id" type="constructor">T_Var</span></a>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;tabs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rename</span> <span class="id" type="var">i</span> <span class="id" type="var">into</span> <span class="id" type="var">y</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">t</span> <span class="id" type="var">into</span> <span class="id" type="var">T<sub>11</sub></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;<span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">tabs</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> <span class="inlinecode"><span class="id" type="var">T<sub>11</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>0</sub></span></span>,&nbsp;then&nbsp;we&nbsp;know&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span>,<span class="id" type="var">x</span>:<span class="id" type="var">U</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">tabs</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> <span class="inlinecode"><span class="id" type="var">T<sub>11</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>0</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>11</sub></span><span style="font-family: arial;">&rarr;</span><span class="id" type="var">T<sub>12</sub></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span>,<span class="id" type="var">x</span>:<span class="id" type="var">U</span>,<span class="id" type="var">y</span>:<span class="id" type="var">T<sub>11</sub></span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>0</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>12</sub></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">empty</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">v</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">U</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;As&nbsp;our&nbsp;IH,&nbsp;we&nbsp;know&nbsp;that&nbsp;forall&nbsp;S&nbsp;Gamma,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span>,<span class="id" type="var">x</span>:<span class="id" type="var">U</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>0</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">S</span></span> <span class="inlinecode"><span style="font-family: arial;">&rarr;</span></span> <span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode">[<span class="id" type="var">x</span>:=<span class="id" type="var">v</span>]<span class="id" type="var">t<sub>0</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">S</span></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;can&nbsp;calculate&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">x</span>:=<span class="id" type="var">v</span></span>t&nbsp;=&nbsp;tabs&nbsp;y&nbsp;T<sub>11</sub>&nbsp;(if&nbsp;beq_id&nbsp;x&nbsp;y&nbsp;then&nbsp;t<sub>0</sub>&nbsp;else&nbsp;<span class="inlinecode"><span class="id" type="var">x</span>:=<span class="id" type="var">v</span></span>t<sub>0</sub>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;And&nbsp;we&nbsp;must&nbsp;show&nbsp;that&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode">[<span class="id" type="var">x</span>:=<span class="id" type="var">v</span>]<span class="id" type="var">t</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>11</sub></span><span style="font-family: arial;">&rarr;</span><span class="id" type="var">T<sub>12</sub></span></span>.&nbsp;&nbsp;We&nbsp;know<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;we&nbsp;will&nbsp;do&nbsp;so&nbsp;using&nbsp;<span class="inlinecode"><span class="id" type="var">T_Abs</span></span>,&nbsp;so&nbsp;it&nbsp;remains&nbsp;to&nbsp;be&nbsp;shown&nbsp;that:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span>,<span class="id" type="var">y</span>:<span class="id" type="var">T<sub>11</sub></span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="keyword">if</span></span> <span class="inlinecode"><span class="id" type="var">beq_id</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">y</span></span> <span class="inlinecode"><span class="id" type="keyword">then</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>0</sub></span></span> <span class="inlinecode"><span class="id" type="keyword">else</span></span> <span class="inlinecode">[<span class="id" type="var">x</span>:=<span class="id" type="var">v</span>]<span class="id" type="var">t<sub>0</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>12</sub></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;consider&nbsp;two&nbsp;cases:&nbsp;<span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">y</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">≠</span> <span class="inlinecode"><span class="id" type="var">y</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_Abs"><span class="id" type="constructor">T_Abs</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">Hxy</span>|<span class="id" type="var">Hxy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x=y&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;<span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">y</span></span>,&nbsp;then&nbsp;the&nbsp;substitution&nbsp;has&nbsp;no&nbsp;effect.&nbsp;&nbsp;Context<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invariance&nbsp;shows&nbsp;that&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span>,<span class="id" type="var">y</span>:<span class="id" type="var">U</span>,<span class="id" type="var">y</span>:<span class="id" type="var">T<sub>11</sub></span></span>&nbsp;and&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span>,<span class="id" type="var">y</span>:<span class="id" type="var">T<sub>11</sub></span></span>&nbsp;are<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equivalent.&nbsp;&nbsp;Since&nbsp;the&nbsp;former&nbsp;context&nbsp;shows&nbsp;that&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">t<sub>0</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>12</sub></span></span>,&nbsp;so&nbsp;does&nbsp;the&nbsp;latter.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">x</span> <span class="id" type="var">Hafi</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_id"><span class="id" type="definition">beq_id</span></a> <span class="id" type="var">y</span> <span class="id" type="var">x</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x&lt;&gt;y&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;<span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode">≠</span> <span class="inlinecode"><span class="id" type="var">y</span></span>,&nbsp;then&nbsp;the&nbsp;IH&nbsp;and&nbsp;context&nbsp;invariance&nbsp;allow&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;us&nbsp;to&nbsp;show&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span>,<span class="id" type="var">x</span>:<span class="id" type="var">U</span>,<span class="id" type="var">y</span>:<span class="id" type="var">T<sub>11</sub></span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>0</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>12</sub></span></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span>,<span class="id" type="var">y</span>:<span class="id" type="var">T<sub>11</sub></span>,<span class="id" type="var">x</span>:<span class="id" type="var">U</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>0</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>12</sub></span></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span style="font-family: serif; font-size:85%;">&Gamma;</span>,<span class="id" type="var">y</span>:<span class="id" type="var">T<sub>11</sub></span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode">[<span class="id" type="var">x</span>:=<span class="id" type="var">v</span>]<span class="id" type="var">t<sub>0</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>12</sub></span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHt</span>. <span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">z</span> <span class="id" type="var">Hafi</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">y</span> <span class="id" type="var">z</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">Hyz</span>|<span class="id" type="var">Hyz</span>]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Maps.html#false_beq_id"><span class="id" type="lemma">false_beq_id</span></a>...<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;let&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;tcase&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rename</span> <span class="id" type="var">i</span> <span class="id" type="var">into</span> <span class="id" type="var">x<sub>1</sub></span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">i<sub>0</sub></span> <span class="id" type="var">into</span> <span class="id" type="var">x<sub>2</sub></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_Case"><span class="id" type="constructor">T_Case</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;left&nbsp;arm&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x</span> <span class="id" type="var">x<sub>1</sub></span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">Hxx1</span>|<span class="id" type="var">Hxx1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;x&nbsp;=&nbsp;x<sub>1</sub>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">z</span> <span class="id" type="var">Hafi</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_id"><span class="id" type="definition">beq_id</span></a> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">z</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;x<sub>1</sub>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHt2</span>. <span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">z</span> <span class="id" type="var">Hafi</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x<sub>1</sub></span> <span class="id" type="var">z</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">Hx1z</span>|<span class="id" type="var">Hx1z</span>]...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="Maps.html#false_beq_id"><span class="id" type="lemma">false_beq_id</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;right&nbsp;arm&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x</span> <span class="id" type="var">x<sub>2</sub></span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">Hxx2</span>|<span class="id" type="var">Hxx2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;x&nbsp;=&nbsp;x<sub>2</sub>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">z</span> <span class="id" type="var">Hafi</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_id"><span class="id" type="definition">beq_id</span></a> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">z</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;x<sub>2</sub>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHt3</span>. <span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">z</span> <span class="id" type="var">Hafi</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x<sub>2</sub></span> <span class="id" type="var">z</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="Maps.html#false_beq_id"><span class="id" type="lemma">false_beq_id</span></a>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;tlcase&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rename</span> <span class="id" type="var">i</span> <span class="id" type="var">into</span> <span class="id" type="var">y<sub>1</sub></span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">i<sub>0</sub></span> <span class="id" type="var">into</span> <span class="id" type="var">y<sub>2</sub></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.T_Lcase"><span class="id" type="constructor">T_Lcase</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y<sub>1</sub></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x=y<sub>1</sub>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">z</span> <span class="id" type="var">Hafi</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">y<sub>1</sub></span> <span class="id" type="var">z</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x&lt;&gt;y<sub>1</sub>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y<sub>2</sub></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;x=y<sub>2</sub>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">z</span> <span class="id" type="var">Hafi</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">y<sub>2</sub></span> <span class="id" type="var">z</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;x&lt;&gt;y<sub>2</sub>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHt3</span>. <span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.context_invariance"><span class="id" type="lemma">context_invariance</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">z</span> <span class="id" type="var">Hafi</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Maps.html#update"><span class="id" type="definition">update</span></a>, <a class="idref" href="Maps.html#t_update"><span class="id" type="definition">t_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">y<sub>1</sub></span> <span class="id" type="var">z</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="Maps.html#false_beq_id"><span class="id" type="lemma">false_beq_id</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Maps.html#beq_idP"><span class="id" type="axiom">beq_idP</span></a> <span class="id" type="var">y<sub>2</sub></span> <span class="id" type="var">z</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="Maps.html#false_beq_id"><span class="id" type="lemma">false_beq_id</span></a>...<br/>
<span class="id" type="keyword">Qed</span>.<br/>
</div>

<br/>
</div>

<div class="doc">
<a name="lab630"></a><h3 class="section">Preservation</h3>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="STLCExtended.preservation"><span class="id" type="lemma">preservation</span></a> : <span style="font-family: arial;">&forall;</span><span class="id" type="var">t</span> <span class="id" type="var">t'</span> <span class="id" type="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Maps.html#empty"><span class="id" type="definition">empty</span></a> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> &#x2208; <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a>  <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MoreStlc.html#t"><span class="id" type="variable">t</span></a> <span style="font-family: arial;">&rArr;</span> <a class="idref" href="MoreStlc.html#t'"><span class="id" type="variable">t'</span></a>  <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Maps.html#empty"><span class="id" type="definition">empty</span></a> <span style="font-family: arial;">&#8866;</span> <a class="idref" href="MoreStlc.html#t'"><span class="id" type="variable">t'</span></a> &#x2208; <a class="idref" href="MoreStlc.html#T"><span class="id" type="variable">T</span></a>.<br/>
<div class="togglescript" id="proofcontrol5" onclick="toggleDisplay('proof5');toggleDisplay('proofcontrol5')"><span class="show"></span></div>
<div class="proofscript" id="proof5" onclick="toggleDisplay('proof5');toggleDisplay('proofcontrol5')">
<span class="id" type="keyword">Proof</span> <span class="id" type="keyword">with</span> <span class="id" type="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">t</span> <span class="id" type="var">t'</span> <span class="id" type="var">T</span> <span class="id" type="var">HT</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Theorem:&nbsp;If&nbsp;<span class="inlinecode"><span class="id" type="var">empty</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">t'</span></span>,&nbsp;then&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">empty</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">t'</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (@<a class="idref" href="Maps.html#empty"><span class="id" type="definition">empty</span></a> <a class="idref" href="MoreStlc.html#STLCExtended.ty"><span class="id" type="inductive">ty</span></a>) <span class="id" type="keyword">as</span> <span style="font-family: serif; font-size:85%;">&Gamma;</span>. <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">HeqGamma</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">t'</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Proof:&nbsp;By&nbsp;induction&nbsp;on&nbsp;the&nbsp;given&nbsp;typing&nbsp;derivation.&nbsp;&nbsp;Many&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cases&nbsp;are&nbsp;contradictory&nbsp;(<span class="inlinecode"><span class="id" type="var">T_Var</span></span>,&nbsp;<span class="inlinecode"><span class="id" type="var">T_Abs</span></span>).&nbsp;&nbsp;We&nbsp;show&nbsp;just&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;interesting&nbsp;ones.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">HT</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">t'</span> <span class="id" type="var">HeqGamma</span> <span class="id" type="var">HE</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">inversion</span> <span class="id" type="var">HE</span>; <span class="id" type="tactic">subst</span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_App&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;the&nbsp;last&nbsp;rule&nbsp;used&nbsp;was&nbsp;<span class="inlinecode"><span class="id" type="var">T_App</span></span>,&nbsp;then&nbsp;<span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span>,&nbsp;and&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;three&nbsp;rules&nbsp;could&nbsp;have&nbsp;been&nbsp;used&nbsp;to&nbsp;show&nbsp;<span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode"><span style="font-family: arial;">&rArr;</span></span> <span class="inlinecode"><span class="id" type="var">t'</span></span>:&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">ST_App1</span></span>,&nbsp;<span class="inlinecode"><span class="id" type="var">ST_App2</span></span>,&nbsp;and&nbsp;<span class="inlinecode"><span class="id" type="var">ST_AppAbs</span></span>.&nbsp;In&nbsp;the&nbsp;first&nbsp;two&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cases,&nbsp;the&nbsp;result&nbsp;follows&nbsp;directly&nbsp;from&nbsp;the&nbsp;IH.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">HE</span>; <span class="id" type="tactic">subst</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ST_AppAbs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;the&nbsp;third&nbsp;case,&nbsp;suppose<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">t<sub>1</sub></span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">tabs</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">T<sub>11</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>12</sub></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">t<sub>2</sub></span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" type="var">v<sub>2</sub></span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;must&nbsp;show&nbsp;that&nbsp;<span class="inlinecode"><span class="id" type="var">empty</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode">[<span class="id" type="var">x</span>:=<span class="id" type="var">v<sub>2</sub></span>]<span class="id" type="var">t<sub>12</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>2</sub></span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;know&nbsp;by&nbsp;assumption&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">empty</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">tabs</span></span> <span class="inlinecode"><span class="id" type="var">x</span></span> <span class="inlinecode"><span class="id" type="var">T<sub>11</sub></span></span> <span class="inlinecode"><span class="id" type="var">t<sub>12</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span><span style="font-family: arial;">&rarr;</span><span class="id" type="var">T<sub>2</sub></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;by&nbsp;inversion<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">x</span>:<span class="id" type="var">T<sub>1</sub></span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">t<sub>12</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>2</sub></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;already&nbsp;proven&nbsp;that&nbsp;substitution&nbsp;preserves&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typing,&nbsp;and<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">empty</span></span> <span class="inlinecode"><span style="font-family: arial;">&#8866;</span></span> <span class="inlinecode"><span class="id" type="var">v<sub>2</sub></span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" type="var">T<sub>1</sub></span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;assumption,&nbsp;so&nbsp;we&nbsp;are&nbsp;done.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MoreStlc.html#STLCExtended.substitution_preserves_typing"><span class="id" type="lemma">substitution_preserves_typing</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">T<sub>1</sub></span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">HT<sub>1</sub></span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Fst&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">HT</span>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Snd&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">HT</span>...<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;let&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;T_Case&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;ST_CaseInl&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">HT<sub>1</sub></span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.substitution_preserves_typing"><span class="id" type="lemma">substitution_preserves_typing</span></a>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;ST_CaseInr&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">HT<sub>1</sub></span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="MoreStlc.html#STLCExtended.substitution_preserves_typing"><span class="id" type="lemma">substitution_preserves_typing</span></a>...<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_Lcase&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ST_LcaseCons&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">HT<sub>1</sub></span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MoreStlc.html#STLCExtended.substitution_preserves_typing"><span class="id" type="lemma">substitution_preserves_typing</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="MoreStlc.html#STLCExtended.TList"><span class="id" type="constructor">TList</span></a> <span class="id" type="var">T<sub>1</sub></span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="MoreStlc.html#STLCExtended.substitution_preserves_typing"><span class="id" type="lemma">substitution_preserves_typing</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">T<sub>1</sub></span>...<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;fix&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FILL&nbsp;IN&nbsp;HERE&nbsp;*)</span><br/>
<span class="id" type="keyword">Qed</span>.<br/>
</div>
</div>

<div class="doc">
<font size=-2 color="rgb(80%,80%,100%)">&#9744;</font> 
</div>
<div class="code code-tight">

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="MoreStlc.html#STLCExtended"><span class="id" type="module">STLCExtended</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;$Date:&nbsp;2016-09-14&nbsp;17:48:09&nbsp;-0400&nbsp;(Wed,&nbsp;14&nbsp;Sep&nbsp;2016)&nbsp;$&nbsp;*)</span><br/>
</div>
</div>

<div id="footer">
<hr/><a href="coqindex.html">Index</a></div>

</div>

</body>
</html>